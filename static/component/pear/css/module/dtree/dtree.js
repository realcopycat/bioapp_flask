/** pear-admin-v3.10.0 MIT License By http://www.pearadmin.com/ */
 ;"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};layui.define(["jquery","layer","form"],(function(e){var t=layui.$,o=layui.layer,a=layui.form,i="dtree-nav-ul-sid",n="dtree-nav-item",r="dtree-nav-div",s="dtree-none-text",l="dtree-toolbar-tool",d="dtree-toolbar-fixed",c="dtree-nav-checkbox-div",h="dtree",u="dtree-nav-first-line",f="dtree-nav-line",p="dtree-nav-last-line",b="dtree-nav-this",m="dtree-nav-show",y="dtree-nav-hide",v="dtree-disabled",g="dtree-icon-hide",k=t("body"),S=t(window),D=(t(document),"dtree"),N={},T={},x="dtree-icon-fuxuankuangxuanzhong",C="dtree-icon-fuxuankuang",I="dtree-icon-fuxuankuang-banxuan",j="dtree-icon-move-down",P="dtree-icon-move-up",w="dtree-icon-refresh",A="dtree-icon-roundcheckfill",q="dtree-icon-roundclosefill",L="dtree-icon-roundcheck",_="dtree-icon-delete1",R="dtree-icon-search_list_light",O="dtree-icon-pulldown",E="dtree-icon-pullup",F="dtree-icon-roundadd",M="dtree-icon-bianji",U="dtree-icon-roundclose",B={"-1":{open:"dtree-icon-null-open",close:"dtree-icon-null-close"},0:{open:"dtree-icon-wenjianjiazhankai",close:"dtree-icon-weibiaoti5"},1:{open:"dtree-icon-jian",close:"dtree-icon-jia"},2:{open:"dtree-icon-xiangxia1",close:"dtree-icon-xiangyou"}},H={"-1":"dtree-icon-null",0:"dtree-icon-weibiaoti5",1:"dtree-icon-yonghu",2:"dtree-icon-fenzhijigou",3:"dtree-icon-fenguangbaobiao",4:"dtree-icon-xinxipilu",5:"dtree-icon-shuye1",6:"dtree-icon-caidan_xunzhang",7:"dtree-icon-normal-file",8:"dtree-icon-dian",9:"dtree-icon-set-sm",10:"dtree-icon-rate"},W="dtree-",$="checkNodeClick",V="itemNodeClick",J="pulldown",G="pullup",z="addToolbar",X="editToolbar",K="delToolbar",Q="moveDown",Y="moveUp",Z="refresh",ee="checkAll",te="unCheckAll",oe="invertAll",ae="remove",ie="searchNode",ne={getElemId:function(e){var o=e.elem||"",a=e.obj||t(o);return 0==a.length?"":t(a)[0].id},escape:function(e){return"string"!=typeof e?"":e.replace(le.escape,(function(e){return se.escape[e]}))},unescape:function(e){return"string"!=typeof e?"":e.replace(le.unescape,(function(e){return se.unescape[e]}))},cloneObj:function(e,t){var o={};e instanceof Array&&(o=[]);var a="";for(var i in void 0!==t&&(a=t.join(",")),e)if(-1==a.indexOf(i)){var n=e[i];o[i]="object"===(void 0===n?"undefined":_typeof(n))?ne.cloneObj(n,void 0!==(void 0===t?"undefined":_typeof(t))?t:[]):n}return o},trimToDot:function(e){return e.replace(/ /g,".")}},re=Object.keys||function(e){e=Object(e);var t=[];for(var o in e)t.push(o);return t},se={escape:{"&":"&amp;","<":"&lt;",">":"&gt;","'":"&quo;"}};se.unescape=function(e){e=Object(e);var t={};for(var o in e)t[e[o]]=o;return t}(se.escape);var le={escape:RegExp("["+re(se.escape).join("")+"]","g"),unescape:RegExp("("+re(se.unescape).join("|")+")","g")},de=function(e){var a=e.data?e.data:{},i="boolean"!=typeof e.async||e.async;t.ajax({type:e.type?e.type:"POST",headers:e.headers,url:e.url,dataType:e.dataType?e.dataType:"json",data:a,async:i,contentType:e.contentType,xhrFields:{withCredentials:e.withCredentials},success:e.success,error:function(t,a,i){"function"==typeof e.error?e.error(t,a,i):o.msg("异步加载失败： "+a,{icon:5,shift:6})},statusCode:{404:function(){o.msg("未找到指定请求，请检查访问路径！",{icon:5,shift:6})},500:function(){o.msg("系统错误！",{icon:5,shift:6})}},complete:function(t,o){"function"==typeof e.complete&&e.complete(t,o)}})},ce=function(e){var t="?";for(var o in e)t+=o+"="+e[o]+"&";return t=t.substring(0,t.length-1)},he=function(e){this.formatter={title:!1},this.response={statusName:"code",statusCode:200,message:"message",rootName:"data",treeId:"id",parentId:"parentId",title:"title",ficonClass:"ficonClass",iconClass:"iconClass",childName:"children",last:"last",spread:"spread",disabled:"disabled",hide:"hide",checkArr:"checkArr",checked:"checked",type:"type",basicData:"basicData"},this.defaultRequest={nodeId:"nodeId",parentId:"parentId",context:"context",leaf:"leaf",level:"level",spread:"spread",dataType:"dataType",checked:"checked",initchecked:"initchecked",basicData:"basicData",recordData:"recordData"},this.toolbarFun={addTreeNode:function(e,t){},editTreeNode:function(e,t){},editTreeLoad:function(e){},delTreeNode:function(e,t){},loadToolbarBefore:function(e,t,o){return e}},this.toolbarStyle={title:"节点",area:["60%","80%"]},this.menubarFun={remove:function(e){return!0}},this.menubarTips={toolbar:[],group:[Q,Y,Z,ee,te,oe,ae,ie],freedom:[]},this.checkbarFun={chooseBefore:function(e,t){return!0},chooseDone:function(e){}},this.iframeDefaultRequest={nodeId:"nodeId",parentId:"parentId",context:"context",leaf:"leaf",level:"level",spread:"spread",dataType:"dataType",checked:"checked",initchecked:"initchecked",basicData:"basicData",recordData:"recordData"},this.iframeFun={iframeDone:function(e){}},this.style={item:"",itemThis:"",dfont:"",icon:"",cbox:"",chs:""},this.usefontStyle={fnode:{node:{open:"",close:""},leaf:""},snode:{node:{open:"",close:""},leaf:""},checkbox:{on:"",out:"",noall:""},menubar:{movedown:"",moveup:"",refresh:"",checkAll:"",unCheckAll:"",invertAll:"",remove:"",search:""},menubarExt:"",toolbar:{menubar:{movedown:"",moveup:"",refresh:"",checkAll:"",unCheckAll:"",invertAll:"",remove:"",search:""},menubarExt:"",pulldown:"",pullup:"",add:"",edit:"",del:""},toolbarExt:""},this.node={nodeId:"",parentId:"",context:"",leaf:"",level:"",spread:"",dataType:"",checked:"",initchecked:"",basicData:"",recordData:""},this.toolbarMenu={},this.checkbarNode=[],this.errData=[],this.checkArrLen=0,this.temp=[],this.bak="",this.setting(e)};he.prototype.setting=function(e){this.options=e||{},this.elem=this.options.elem||N.elem||"",void 0===this.options.obj?this.elem&&t(this.elem).length>0&&(this.obj=t(this.elem)):(this.obj=this.options.obj||N.obj||this.obj,this.elem="#"+this.obj[0].id),this.scroll=this.options.scroll||N.scroll||this.elem,this.accordion="boolean"==typeof this.options.accordion?this.options.accordion:"boolean"==typeof N.accordion&&N.accordion,this.accordion?this.initLevel=1:this.initLevel=this.options.initLevel||N.initLevel||2,this.type=this.options.type||N.type||"load",this.cache="boolean"==typeof this.options.cache?this.options.cache:"boolean"!=typeof N.cache||N.cache,this.record=this.options.record||N.record||!1,this.load="boolean"==typeof this.options.load?this.options.load:"boolean"!=typeof N.load||N.load,this.none=this.options.none||N.nont||"无数据",this.tempHeight=this.options.height||N.height,this.tempHeight?/^full-\d+$/.test(this.tempHeight)?(this.fullHeightGap=this.tempHeight.split("-")[1],this.height=S.height()-this.fullHeightGap):(this.fullHeightGap=this.tempHeight,this.height=this.tempHeight):(this.fullHeightGap="",this.height=""),this.width=this.options.width||N.width||"260",this.obj.css("width",this.width),this.iconfont=this.options.iconfont||N.iconfont||"dtreefont",this.iconfontStyle=this.options.iconfontStyle||N.iconfontStyle||{},this.nodeIconArray=t.extend(B,this.options.nodeIconArray||N.nodeIconArray)||B,this.leafIconArray=t.extend(H,this.options.leafIconArray||N.leafIconArray)||H,this.skin=this.options.skin||N.skin||"theme","layui"==this.skin?(this.line="boolean"==typeof this.options.line?this.options.line:"boolean"!=typeof N.line||N.line,this.ficon=this.options.ficon||N.ficon||"7",this.fnodeIcon="string"==typeof this.ficon||"number"==typeof this.ficon?"-1"==this.ficon?"-1":"1":this.ficon[0],this.fleafIcon="string"==typeof this.ficon||"number"==typeof this.ficon?this.ficon:this.ficon[1],this.icon=this.options.icon||N.icon||"-1",this.nodeIcon="string"==typeof this.icon||"number"==typeof this.icon?(this.icon,"-1"):this.icon[0],this.leafIcon="string"==typeof this.icon||"number"==typeof this.icon?this.icon:this.icon[1]):"laySimple"==this.skin?(this.line=this.options.line||N.line||!1,this.ficon=this.options.ficon||N.ficon||["2","-1"],this.fnodeIcon="string"==typeof this.ficon||"number"==typeof this.ficon?"-1"==this.ficon?"-1":"2":this.ficon[0],this.fleafIcon="string"==typeof this.ficon||"number"==typeof this.ficon?this.ficon:this.ficon[1],this.icon=this.options.icon||N.icon||"-1",this.nodeIcon="string"==typeof this.icon||"number"==typeof this.icon?(this.icon,"-1"):this.icon[0],this.leafIcon="string"==typeof this.icon||"number"==typeof this.icon?this.icon:this.icon[1]):(this.line=this.options.line||N.line||!1,this.ficon=this.options.ficon||N.ficon||"8",this.fnodeIcon="string"==typeof this.ficon||"number"==typeof this.ficon?"-1"==this.ficon?"-1":"1":this.ficon[0],this.fleafIcon="string"==typeof this.ficon||"number"==typeof this.ficon?this.ficon:this.ficon[1],this.icon=this.options.icon||N.icon||"5",this.nodeIcon="string"==typeof this.icon||"number"==typeof this.icon?"-1"==this.icon?"-1":"0":this.icon[0],this.leafIcon="string"==typeof this.icon||"number"==typeof this.icon?this.icon:this.icon[1]),this.url=this.options.url||N.url||"",this.async="boolean"==typeof this.options.async?this.options.async:"boolean"!=typeof N.async||N.async,this.headers=this.options.headers||N.headers||{},this.method=this.options.method||N.method||"post",this.dataType=this.options.dataType||N.dataType||"json",this.contentType=this.options.contentType||N.contentType||"application/x-www-form-urlencoded",this.defaultRequest=t.extend(this.defaultRequest,this.options.defaultRequest||N.defaultRequest)||this.defaultRequest,this.filterRequest=this.options.filterRequest||N.filterRequest||[],this.request=this.options.request||N.request||{},this.response=t.extend(this.response,this.options.response||N.response)||this.response,this.data=this.options.data||N.data||null,this.dataFormat=this.options.dataFormat||N.dataFormat||"levelRelationship",this.dataStyle=this.options.dataStyle||N.dataStyle||"defaultStyle",this.errDataShow=this.options.errDataShow||N.errDataShow||!1,this.withCredentials=this.options.withCredentials||N.withCredentials||!1,this.success=this.options.success||N.success||function(e,t){},this.done=this.options.done||N.done||function(e,t){},this.formatter=t.extend(this.formatter,this.options.formatter||N.formatter)||this.formatter,this.error=this.options.error||N.error||function(e,t,o){},this.complete=this.options.complete||N.complete||function(e,t){},this.checkbar=this.options.checkbar||N.checkbar||!1,this.checkbarLoad=this.options.checkbarLoad||N.checkbarLoad||"node",this.checkbarType=this.options.checkbarType||N.checkbarType||"all",this.checkbarData=this.options.checkbarData||N.checkbarData||"choose",this.checkbarFun=t.extend(this.checkbarFun,this.options.checkbarFun||N.checkbarFun)||this.checkbarFun,this.menubar=this.options.menubar||N.menubar||!1,this.menubarTips=t.extend(this.menubarTips,this.options.menubarTips||N.menubarTips)||this.menubarTips,this.menubarFun=t.extend(this.menubarFun,this.options.menubarFun||N.menubarFun)||this.menubarFun,this.toolbar=this.options.toolbar||N.toolbar||!1,this.toolbarWay=this.options.toolbarWay||N.toolbarWay||"contextmenu",this.toolbarStyle=t.extend(this.toolbarStyle,this.options.toolbarStyle||N.toolbarStyle)||this.toolbarStyle,this.toolbarLoad=this.options.toolbarLoad||N.toolbarLoad||"node",this.toolbarShow=this.options.toolbarShow||N.toolbarShow||["add","edit","delete"],this.toolbarBtn=this.options.toolbarBtn||N.toolbarBtn||null,this.toolbarExt=this.options.toolbarExt||N.toolbarExt||[],this.toolbarFun=t.extend(this.toolbarFun,this.options.toolbarFun||N.toolbarFun)||this.toolbarFun,this.useIframe=this.options.useIframe||N.useIframe||!1,this.iframeElem=this.options.iframeElem||N.iframeElem||"",this.iframeUrl=this.options.iframeUrl||N.iframeUrl||"",this.iframeLoad=this.options.iframeLoad||N.iframeLoad||"leaf",this.iframeDefaultRequest=t.extend(this.iframeDefaultRequest,this.options.iframeDefaultRequest||N.iframeDefaultRequest)||this.iframeDefaultRequest,this.iframeRequest=t.extend(this.iframeRequest,this.options.iframeRequest)||t.extend(this.iframeRequest,N.iframeRequest)||this.iframeRequest,this.iframeFun=t.extend(this.iframeFun,this.options.iframeFun)||t.extend(this.iframeFun,N.iframeFun)||this.iframeFun,this.select=this.options.select||!1,this.select&&this.selectSetting(),this.ensureTheme()},he.prototype.reloadSetting=function(e){this.options=t.extend(this.options,e)||this.options,this.elem=this.options.elem||this.elem,void 0===this.options.obj?this.elem&&t(this.elem).length>0&&(this.obj=t(this.elem)):(this.obj=this.options.obj||this.obj,this.elem="#"+this.obj[0].id),this.scroll=this.options.scroll||this.scroll,this.accordion="boolean"==typeof this.options.accordion?this.options.accordion:this.accordion,this.accordion?this.initLevel=1:this.initLevel=this.options.initLevel||this.initLevel,this.type=this.options.type||this.type,this.cache="boolean"==typeof this.options.cache?this.options.cache:this.cache,this.record="boolean"==typeof this.options.record?this.options.record:this.record,this.load="boolean"==typeof this.options.load?this.options.load:this.load,this.none=this.options.none||this.none,this.tempHeight=this.options.height||this.height,this.tempHeight&&(/^full-\d+$/.test(this.tempHeight)?(this.fullHeightGap=this.tempHeight.split("-")[1],this.height=S.height()-this.fullHeightGap):(this.fullHeightGap=this.tempHeight,this.height=this.tempHeight)),this.width=this.options.width||this.width,this.obj.css("width",this.width),this.line="boolean"==typeof this.options.line?this.options.line:this.line,this.iconfont=this.options.iconfont||this.iconfont,this.iconfontStyle=this.options.iconfontStyle||this.iconfontStyle,this.nodeIconArray=t.extend(B,this.options.nodeIconArray)||this.nodeIconArray,this.leafIconArray=t.extend(H,this.options.leafIconArray)||this.leafIconArray,this.skin=this.options.skin||this.skin,"layui"==this.skin?(this.line="boolean"!=typeof this.options.line||this.options.line,this.ficon=this.options.ficon||this.ficon,this.fnodeIcon="string"==typeof this.ficon||"number"==typeof this.ficon?"-1"==this.ficon?"-1":"1":this.ficon[0],this.fleafIcon="string"==typeof this.ficon||"number"==typeof this.ficon?this.ficon:this.ficon[1],this.icon=this.options.icon||this.icon,this.nodeIcon="string"==typeof this.icon||"number"==typeof this.icon?(this.icon,"-1"):this.icon[0],this.leafIcon="string"==typeof this.icon||"number"==typeof this.icon?this.icon:this.icon[1]):"laySimple"==this.skin?(this.line="boolean"==typeof this.options.line&&this.options.line,this.ficon=this.options.ficon||this.ficon,this.fnodeIcon="string"==typeof this.ficon||"number"==typeof this.ficon?"-1"==this.ficon?"-1":"2":this.ficon[0],this.fleafIcon="string"==typeof this.ficon||"number"==typeof this.ficon?this.ficon:this.ficon[1],this.icon=this.options.icon||this.icon,this.nodeIcon="string"==typeof this.icon||"number"==typeof this.icon?(this.icon,"-1"):this.icon[0],this.leafIcon="string"==typeof this.icon||"number"==typeof this.icon?this.icon:this.icon[1]):(this.line="boolean"==typeof this.options.line&&this.options.line,this.ficon=this.options.ficon||this.ficon,this.fnodeIcon="string"==typeof this.ficon||"number"==typeof this.ficon?"-1"==this.ficon?"-1":"1":this.ficon[0],this.fleafIcon="string"==typeof this.ficon||"number"==typeof this.ficon?this.ficon:this.ficon[1],this.icon=this.options.icon||this.icon,this.nodeIcon="string"==typeof this.icon||"number"==typeof this.icon?"-1"==this.icon?"-1":"0":this.icon[0],this.leafIcon="string"==typeof this.icon||"number"==typeof this.icon?this.icon:this.icon[1]),this.url=this.options.url||this.url,this.async="boolean"==typeof this.options.async?this.options.async:this.async,this.headers=this.options.headers||this.headers,this.method=this.options.method||this.method,this.dataType=this.options.dataType||this.dataType,this.contentType=this.options.contentType||this.contentType,this.defaultRequest=t.extend(this.defaultRequest,this.options.defaultRequest)||this.defaultRequest,this.filterRequest=this.options.filterRequest||this.filterRequest,this.request=this.options.request||this.request,this.response=t.extend(this.response,this.options.response)||this.response,this.data=this.options.data||this.data,this.dataFormat=this.options.dataFormat||this.dataFormat,this.dataStyle=this.options.dataStyle||this.dataStyle,this.errDataShow="boolean"==typeof this.options.errDataShow?this.options.errDataShow:this.errDataShow,this.withCredentials="boolean"==typeof this.options.withCredentials?this.options.withCredentials:this.withCredentials,this.success=this.options.success||this.success,this.done=this.options.done||this.done,this.formatter=t.extend(this.formatter,this.options.formatter)||this.formatter,this.error=this.options.error||this.error,this.complete=this.options.complete||this.complete,this.checkbar=this.options.checkbar||this.checkbar,this.checkbarLoad=this.options.checkbarLoad||this.checkbarLoad,this.checkbarType=this.options.checkbarType||this.checkbarType,this.checkbarData=this.options.checkbarData||this.checkbarData,this.checkbarFun=t.extend(this.checkbarFun,this.options.checkbarFun)||this.checkbarFun,this.menubar=this.options.menubar||this.menubar,this.menubarTips=t.extend(this.menubarTips,this.options.menubarTips)||this.menubarTips,this.menubarFun=t.extend(this.menubarFun,this.options.menubarFun)||this.menubarFun,this.toolbar=this.options.toolbar||this.toolbar,this.toolbarWay=this.options.toolbarWay||this.toolbarWay,this.toolbarStyle=t.extend(this.toolbarStyle,this.options.toolbarStyle)||this.toolbarStyle,this.toolbarLoad=this.options.toolbarLoad||this.toolbarLoad,this.toolbarShow=this.options.toolbarShow||this.toolbarShow,this.toolbarBtn=this.options.toolbarBtn||this.toolbarBtn,this.toolbarExt=this.options.toolbarExt||this.toolbarExt,this.toolbarFun=t.extend(this.toolbarFun,this.options.toolbarFun)||this.toolbarFun,this.useIframe=this.options.useIframe||this.useIframe,this.iframeElem=this.options.iframeElem||this.iframeElem,this.iframeUrl=this.options.iframeUrl||this.iframeUrl,this.iframeLoad=this.options.iframeLoad||this.iframeLoad,this.iframeDefaultRequest=t.extend(this.iframeDefaultRequest,this.options.iframeDefaultRequest)||this.iframeDefaultRequest,this.iframeRequest=t.extend(this.iframeRequest,this.options.iframeRequest)||this.iframeRequest,this.iframeFun=t.extend(this.iframeFun,this.options.iframeFun)||this.iframeFun,this.select&&this.reloadSelectSetting(),this.ensureTheme()},he.prototype.selectSetting=function(){this.select=!0,this.selectInitVal=this.obj.attr("data-value")||this.options.selectInitVal||"",this.selectTreeDiv=this.obj[0].id+"_tree_div",this.selectCardDiv=this.obj[0].id+"_select_card_div",this.selectDiv=this.obj[0].id+"_select_div",this.selectTipsName=this.obj[0].id+"_select_input",this.selectTips=this.options.selectTips||"请选择",this.selectInputName=this.options.selectInputName||{nodeId:this.obj[0].id+"_select_nodeId"},this.renderSelectDom()},he.prototype.reloadSelectSetting=function(){this.selectInitVal=this.obj.attr("data-value")||this.options.selectInitVal||this.selectInitVal,this.selectTips=this.options.selectTips||this.selectTips,this.selectInputName=t.extend(this.selectInputName,this.options.selectInputName)||this.selectInputName,this.reloadSelectDom()},he.prototype.renderSelectDom=function(){var e=this,t=e.obj[0].id,o=e.selectInputName,a=[];for(var i in o)a.push('<input type="hidden" dtree-id="'+t+'" dtree-node="'+i+'" name="'+o[i]+'" value="" readonly>');var n=['<div class="layui-unselect layui-form-select" dtree-id="'+t+'" dtree-select="'+e.selectDiv+'">','<div class="layui-select-title">',a.join(""),'<input type="text" dtree-id="'+t+'" id="'+e.selectTipsName+'_id" name="'+e.selectTipsName+'" placeholder="'+e.selectTips+'" value="" readonly class="layui-input layui-unselect">','<i class="layui-edge"></i>',"</div></div>"].join("");e.obj.before(n),e.obj.wrap('<div class="layui-card dtree-select" dtree-id="'+t+'" dtree-card="'+e.selectCardDiv+'"></div>').wrap('<div class="layui-card-body"></div>').wrap('<div id="'+e.selectTreeDiv+'"></div>')},he.prototype.reloadSelectDom=function(){var e=this,o=e.obj[0].id,a=e.selectInputName,i=[];for(var n in a)i.push('<input type="hidden" dtree-id="'+o+'" dtree-node="'+n+'" name="'+a[n]+'" value="" readonly>');t("div[dtree-id='"+o+"'][dtree-select='"+e.selectDiv+"']").find("div.layui-select-title").html("");var r=[i.join(""),'<input type="text" dtree-id="'+o+'" id="'+e.selectTipsName+'_id" name="'+e.selectTipsName+'" placeholder="'+e.selectTips+'" value="" readonly class="layui-input layui-unselect">','<i class="layui-edge"></i>'].join("");t("div[dtree-id='"+o+"'][dtree-select='"+e.selectDiv+"']").find("div.layui-select-title").html(r)},he.prototype.selectVal=function(e){var o=this,a=o.obj[0].id,i=o.selectInputName,n="",r={};if(o.checkbar)t("div[dtree-select='"+o.selectDiv+"']").find("input[dtree-id='"+a+"']").each((function(){var e=t(this).attr("name"),o=t(this).val();r[e]=o}));else{for(var s in void 0===e&&(e=o.getNowParam()),"string"==typeof e&&(e=o.getParam(e)),n=e.context,i)r[i[s]]=e[s],t("div[dtree-select='"+o.selectDiv+"']").find("input[dtree-id='"+a+"'][name='"+i[s]+"']").val(e[s]||"");e.nodeId&&!e.context&&(n=o.getParam(e.nodeId)),t("div[dtree-select='"+o.selectDiv+"']").find("input[dtree-id='"+a+"'][name='"+o.selectTipsName+"']").val(n||"")}return r},he.prototype.selectCheckboxVal=function(){var e=this,o=e.obj[0].id,a=e.selectInputName,i=e.getCheckbarJsonArrParam();selectTipsNameValue=i.context;var n={};for(var r in a){var s=i[r].join(",");n[a[r]]=s,t("div[dtree-select='"+e.selectDiv+"']").find("input[dtree-id='"+o+"'][name='"+a[r]+"']").val(s)}return t("div[dtree-select='"+e.selectDiv+"']").find("input[dtree-id='"+o+"'][name='"+e.selectTipsName+"']").val(selectTipsNameValue),n},he.prototype.selectResetVal=function(){var e=this,o=e.obj[0].id;t("input[dtree-id='"+o+"']").val(""),e.cancelNavThis(),e.checkbar&&e.cancelCheckedNode()},he.prototype.ensureTheme=function(){this.style.item=W+this.skin+"-item",this.style.itemThis=W+this.skin+"-item-this",this.style.dfont=W+this.skin+"-dtreefont",this.style.ficon=W+this.skin+"-ficon",this.style.icon=W+this.skin+"-icon",this.style.cbox=W+this.skin+"-checkbox",this.style.chs=W+this.skin+"-choose";var e=this.iconfont,t=[];"string"==typeof e?t.push(e):t=e;var o=this.iconfontStyle,a=[];null==o.length?a.push(o):a=o;for(var i=0;i<t.length;i++){var n=t[i],r=a[i];void 0!==r&&(this.useDefaultOrUserDefineFnodeStyle(n,r.fnode),this.useDefaultOrUserDefineSnodeStyle(n,r.snode),this.useDefaultOrUserDefineCheckboxStyle(n,r.checkbox),this.useDefaultOrUserDefineMenubarStyle(n,r.menubar),this.useDefaultOrUserDefineMenubarExtStyle(n,r.menubarExt),this.useDefaultOrUserDefineToolbarStyle(n,r.toolbar),this.useDefaultOrUserDefineToolbarExtStyle(n,r.toolbarExt))}},he.prototype.useDefaultOrUserDefineFnodeStyle=function(e,t){var o=this.usefontStyle.fnode.node.open,a=this.usefontStyle.fnode.node.close,i=this.usefontStyle.fnode.leaf;if(void 0===t)this.usefontStyle.fnode.node.open=""==o?e+" "+this.nodeIconArray[this.fnodeIcon].open:o,this.usefontStyle.fnode.node.close=""==a?e+" "+this.nodeIconArray[this.fnodeIcon].close:a,this.usefontStyle.fnode.leaf=""==i?e+" "+this.leafIconArray[this.fleafIcon]:i;else{var n=t.node,r=t.leaf;if(void 0===n)this.usefontStyle.fnode.node.open=""==o?e+" "+this.nodeIconArray[this.fnodeIcon].open:o,this.usefontStyle.fnode.node.close=""==a?e+" "+this.nodeIconArray[this.fnodeIcon].close:a;else{var s=n.open,l=n.close;this.usefontStyle.fnode.node.open=void 0===s?""==o?e+" "+this.nodeIconArray[this.fnodeIcon].open:o:e+" "+s,this.usefontStyle.fnode.node.close=void 0===l?""==a?e+" "+this.nodeIconArray[this.fnodeIcon].close:a:e+" "+l}this.usefontStyle.fnode.leaf=void 0===r?""==i?e+" "+this.leafIconArray[this.fleafIcon]:i:e+" "+r}},he.prototype.useDefaultOrUserDefineSnodeStyle=function(e,t){var o=this.usefontStyle.snode.node.open,a=this.usefontStyle.snode.node.close,i=this.usefontStyle.snode.leaf;if(void 0===t)this.usefontStyle.snode.node.open=""==o?e+" "+this.nodeIconArray[this.nodeIcon].open:o,this.usefontStyle.snode.node.close=""==a?e+" "+this.nodeIconArray[this.nodeIcon].close:a,this.usefontStyle.snode.leaf=""==i?e+" "+this.leafIconArray[this.leafIcon]:i;else{var n=t.node,r=t.leaf;if(void 0===n)this.usefontStyle.snode.node.open=""==o?e+" "+this.nodeIconArray[this.nodeIcon].open:o,this.usefontStyle.snode.node.close=""==a?e+" "+this.nodeIconArray[this.nodeIcon].close:a;else{var s=n.open,l=n.close;this.usefontStyle.snode.node.open=void 0===s?""==o?e+" "+this.nodeIconArray[this.nodeIcon].open:o:e+" "+s,this.usefontStyle.snode.node.close=void 0===l?""==a?e+" "+this.nodeIconArray[this.nodeIcon].close:a:e+" "+l}this.usefontStyle.snode.leaf=void 0===r?""==i?e+" "+this.leafIconArray[this.leafIcon]:i:e+" "+r}},he.prototype.useDefaultOrUserDefineCheckboxStyle=function(e,t){var o=this.usefontStyle.checkbox.on,a=this.usefontStyle.checkbox.out,i=this.usefontStyle.checkbox.noall;if(void 0===t)this.usefontStyle.checkbox.on=""==o?e+" "+x:o,this.usefontStyle.checkbox.out=""==a?e+" "+C:a,this.usefontStyle.checkbox.noall=""==i?e+" "+I:i;else{var n=t.on,r=t.out,s=t.noall;this.usefontStyle.checkbox.on=void 0===n?""==o?e+" "+x:o:e+" "+n,this.usefontStyle.checkbox.out=void 0===r?""==a?e+" "+C:a:e+" "+r,this.usefontStyle.checkbox.noall=void 0===s?""==i?e+" "+I:i:e+" "+s}},he.prototype.useDefaultOrUserDefineMenubarStyle=function(e,t){var o=this.usefontStyle.menubar.movedown,a=this.usefontStyle.menubar.moveup,i=this.usefontStyle.menubar.refresh,n=this.usefontStyle.menubar.checkAll,r=this.usefontStyle.menubar.unCheckAll,s=this.usefontStyle.menubar.invertAll,l=this.usefontStyle.menubar.remove,d=this.usefontStyle.menubar.search;if(void 0===t)this.usefontStyle.menubar.movedown=""==o?e+" "+j:o,this.usefontStyle.menubar.moveup=""==a?e+" "+P:a,this.usefontStyle.menubar.refresh=""==i?e+" "+w:i,this.usefontStyle.menubar.checkAll=""==n?e+" "+A:n,this.usefontStyle.menubar.unCheckAll=""==r?e+" "+q:r,this.usefontStyle.menubar.invertAll=""==s?e+" "+L:s,this.usefontStyle.menubar.remove=""==l?e+" "+_:l,this.usefontStyle.menubar.search=""==d?e+" "+R:d;else{var c=t.movedown,h=t.moveup,u=t.refresh,f=t.checkAll,p=t.unCheckAll,b=t.invertAll,m=t.remove,y=t.search;this.usefontStyle.menubar.movedown=void 0===c?""==o?e+" "+j:o:e+" "+c,this.usefontStyle.menubar.moveup=void 0===h?""==a?e+" "+P:a:e+" "+h,this.usefontStyle.menubar.refresh=void 0===u?""==i?e+" "+w:i:e+" "+u,this.usefontStyle.menubar.checkAll=void 0===f?""==n?e+" "+A:n:e+" "+f,this.usefontStyle.menubar.unCheckAll=void 0===p?""==r?e+" "+q:r:e+" "+p,this.usefontStyle.menubar.invertAll=void 0===b?""==s?e+" "+L:s:e+" "+b,this.usefontStyle.menubar.remove=void 0===m?""==l?e+" "+_:l:e+" "+m,this.usefontStyle.menubar.search=void 0===y?""==d?e+" "+R:d:e+" "+y}},he.prototype.useDefaultOrUserDefineMenubarExtStyle=function(e,t){var o=this.usefontStyle.menubarExt;this.usefontStyle.menubarExt=void 0===t?""==o?e:o:t},he.prototype.useDefaultOrUserDefineToolbarStyle=function(e,t){var o=this.usefontStyle.toolbar.menubar.movedown,a=this.usefontStyle.toolbar.menubar.moveup,i=this.usefontStyle.toolbar.menubar.refresh,n=this.usefontStyle.toolbar.menubar.checkAll,r=this.usefontStyle.toolbar.menubar.unCheckAll,s=this.usefontStyle.toolbar.menubar.invertAll,l=this.usefontStyle.toolbar.menubar.remove,d=this.usefontStyle.toolbar.menubar.search,c=this.usefontStyle.toolbar.menubarExt,h=this.usefontStyle.toolbar.pulldown,u=this.usefontStyle.toolbar.pullup,f=this.usefontStyle.toolbar.add,p=this.usefontStyle.toolbar.edit,b=this.usefontStyle.toolbar.del;if(void 0===t)this.usefontStyle.toolbar.menubar.movedown=""==o?e+" "+this.usefontStyle.menubar.movedown:o,this.usefontStyle.toolbar.menubar.moveup=""==a?e+" "+this.usefontStyle.menubar.moveup:a,this.usefontStyle.toolbar.menubar.refresh=""==i?e+" "+this.usefontStyle.menubar.refresh:i,this.usefontStyle.toolbar.menubar.checkAll=""==n?e+" "+this.usefontStyle.menubar.checkAll:n,this.usefontStyle.toolbar.menubar.unCheckAll=""==r?e+" "+this.usefontStyle.menubar.unCheckAll:r,this.usefontStyle.toolbar.menubar.invertAll=""==s?e+" "+this.usefontStyle.menubar.invertAll:s,this.usefontStyle.toolbar.menubar.remove=""==l?e+" "+this.usefontStyle.menubar.remove:l,this.usefontStyle.toolbar.menubar.search=""==d?e+" "+this.usefontStyle.menubar.search:d,this.usefontStyle.toolbar.menubarExt=""==c?this.usefontStyle.menubarExt:c,this.usefontStyle.toolbar.pulldown=""==h?e+" "+O:h,this.usefontStyle.toolbar.pullup=""==u?e+" "+E:u,this.usefontStyle.toolbar.add=""==f?e+" "+F:f,this.usefontStyle.toolbar.edit=""==p?e+" "+M:p,this.usefontStyle.toolbar.del=""==b?e+" "+U:b;else{var m=t.menubar,y=t.menubarExt,v=t.pulldown,g=t.pullup,k=t.add,S=t.edit,D=t.del;if(void 0===m)this.usefontStyle.toolbar.menubar.movedown=""==o?e+" "+this.usefontStyle.menubar.movedown:o,this.usefontStyle.toolbar.menubar.moveup=""==a?e+" "+this.usefontStyle.menubar.moveup:a,this.usefontStyle.toolbar.menubar.refresh=""==i?e+" "+this.usefontStyle.menubar.refresh:i,this.usefontStyle.toolbar.menubar.checkAll=""==n?e+" "+this.usefontStyle.menubar.checkAll:n,this.usefontStyle.toolbar.menubar.unCheckAll=""==tempUncheckAll?e+" "+this.usefontStyle.menubar.unCheckAll:tempUncheckAll,this.usefontStyle.toolbar.menubar.invertAll=""==s?e+" "+this.usefontStyle.menubar.invertAll:s,this.usefontStyle.toolbar.menubar.remove=""==l?e+" "+this.usefontStyle.menubar.remove:l,this.usefontStyle.toolbar.menubar.search=""==d?e+" "+this.usefontStyle.menubar.search:d;else{var N=m.movedown,T=m.moveup,x=m.refresh,C=m.checkAll,I=m.unCheckAll,j=m.invertAll,P=m.remove,w=m.search;this.usefontStyle.toolbar.menubar.movedown=void 0===N?""==o?e+" "+this.usefontStyle.menubar.movedown:o:e+" "+N,this.usefontStyle.toolbar.menubar.moveup=void 0===T?""==a?e+" "+this.usefontStyle.menubar.moveup:a:e+" "+T,this.usefontStyle.toolbar.menubar.refresh=void 0===x?""==i?e+" "+this.usefontStyle.menubar.refresh:i:e+" "+x,this.usefontStyle.toolbar.menubar.checkAll=void 0===C?""==n?e+" "+this.usefontStyle.menubar.checkAll:n:e+" "+C,this.usefontStyle.toolbar.menubar.unCheckAll=void 0===I?""==tempUncheckAll?e+" "+this.usefontStyle.menubar.unCheckAll:tempUncheckAll:e+" "+I,this.usefontStyle.toolbar.menubar.invertAll=void 0===j?""==s?e+" "+this.usefontStyle.menubar.invertAll:s:e+" "+j,this.usefontStyle.toolbar.menubar.remove=void 0===P?""==l?e+" "+this.usefontStyle.menubar.remove:l:e+" "+P,this.usefontStyle.toolbar.menubar.search=void 0===w?""==d?e+" "+this.usefontStyle.menubar.search:d:e+" "+w}this.usefontStyle.toolbar.menubarExt=void 0===y?""==c?this.usefontStyle.menubarExt:c:y,this.usefontStyle.toolbar.pulldown=void 0===v?""==h?e+" "+O:h:e+" "+v,this.usefontStyle.toolbar.pullup=void 0===g?""==u?e+" "+E:u:e+" "+g,this.usefontStyle.toolbar.add=void 0===k?""==f?e+" "+F:f:e+" "+k,this.usefontStyle.toolbar.edit=void 0===S?""==p?e+" "+M:p:e+" "+S,this.usefontStyle.toolbar.del=void 0===D?""==b?e+" "+U:b:e+" "+D}},he.prototype.useDefaultOrUserDefineToolbarExtStyle=function(e,t){var o=this.usefontStyle.toolbarExt;this.usefontStyle.toolbarExt=void 0===t?""==o?e:o:t},he.prototype.operateIcon=function(e,t){var o=this,a=e.attr("data-iconClass"),i=t.attr("data-iconClass");return{open:function(){e.attr("data-spread","open"),t.attr("data-spread","open"),a||(e.removeClass(o.usefontStyle.fnode.node.close),e.addClass(o.usefontStyle.fnode.node.open)),i||(t.removeClass(o.usefontStyle.snode.node.close),t.addClass(o.usefontStyle.snode.node.open))},close:function(){e.attr("data-spread","close"),t.attr("data-spread","close"),a||(e.removeClass(o.usefontStyle.fnode.node.open),e.addClass(o.usefontStyle.fnode.node.close)),i||(t.removeClass(o.usefontStyle.snode.node.open),t.addClass(o.usefontStyle.snode.node.close))},openWithLeaf:function(){e.attr("data-spread","open"),t.attr("data-spread","open"),a||(e.removeClass(o.usefontStyle.fnode.leaf),e.addClass(o.usefontStyle.fnode.node.open)),i||(t.removeClass(o.usefontStyle.snode.leaf),t.addClass(o.usefontStyle.snode.node.open))},closeWithLeaf:function(){e.attr("data-spread","last"),t.attr("data-spread","last"),a||(e.removeClass(o.usefontStyle.fnode.node.open),e.removeClass(o.usefontStyle.fnode.node.close),e.addClass(o.usefontStyle.fnode.leaf)),i||(t.removeClass(o.usefontStyle.snode.node.open),t.removeClass(o.usefontStyle.snode.node.close),t.addClass(o.usefontStyle.snode.leaf))}}},he.prototype.showLine=function(e){var o=this;o.line&&(e&&e.length>0?e.each((function(){o.showLineLi(t(this))})):o.obj.find("li[data-id]").each((function(){o.showLineLi(t(this))})))},he.prototype.showLineLi=function(e){var t=e.children("div"),o=e.next("li"),a=e.parent("ul");if(a[0].id==this.obj[0].id)e.removeClass(f),e.removeClass(p),e.addClass(u);else{var i=a.parent("li").next("li");if(0==i.length)0==o.length?(e.removeClass(f),e.removeClass(u),e.addClass(p)):(e.removeClass(u),e.removeClass(p),e.addClass(f));else{var n=i.children("div");0==o.length&&"leaf"==t.children("cite").attr("data-leaf")&&"leaf"==n.children("cite").attr("data-leaf")?(e.removeClass(u),e.removeClass(f),e.addClass(p)):(e.removeClass(u),e.removeClass(p),e.addClass(f))}}},he.prototype.autoHeight=function(){var e=this,t=e.height;""!=t&&(e.elem==e.scroll?e.obj.parent().css("height",t+"px"):e.obj.closest(e.scroll).css("height",t+"px"))},he.prototype.reload=function(e){this.reloadSetting(e),this.init()},he.prototype.init=function(){var e=this;if("object"===(void 0===e?"undefined":_typeof(e)))if(e.autoHeight(),e.data){if(void 0===e.data.length)return void o.msg("数据解析异常，data数据格式不正确",{icon:5});if(0==e.data.length)return void e.obj.html(e.getNoneDom().text());e.obj.html(""),setTimeout((function(){if(e.success(e.data,e.obj),"list"==e.dataFormat){var t=e.obj.attr("data-id"),o=e.queryListTreeByPid(t,e.data);e.loadListTree(o,e.data,1)}else e.loadTree(e.data,1);e.showLine(),e.toolbar&&"contextmenu"!=e.toolbarWay&&e.setToolbarDom().setToolbarPlace(e.toolbarMenu),e.msgErrData(),e.select&&e.selectVal(e.selectInitVal),e.bak=e.obj.html(),e.done(e.data,e.obj)}),100)}else{if(!e.url)return void o.msg("数据请求异常，url参数未指定",{icon:5});e.obj.html("");var a=e.load?o.load(1):"";de({async:e.async,headers:e.headers,type:e.method,url:e.url,dataType:e.dataType,contentType:e.contentType,withCredentials:e.withCredentials,data:e.getFilterRequestParam(e.getRequestParam()),success:function(o){"string"==typeof o&&(o=t.parseJSON(o)),e.success(o,e.obj);var a="";if((a="layuiStyle"==e.dataStyle?o[e.response.statusName]:o.status[e.response.statusName])==e.response.statusCode){var i=o[e.response.rootName];if(void 0===i.length)return void e.obj.html(e.getNoneDom().errText("数据解析异常，url回调后的数据格式不正确"));if(0==i.length)return void e.obj.html(e.getNoneDom().text());if("list"==e.dataFormat){var n=e.obj.attr("data-id"),r=e.queryListTreeByPid(n,i);e.loadListTree(r,i,1)}else e.loadTree(i,1);e.showLine(),e.toolbar&&"contextmenu"!=e.toolbarWay&&e.setToolbarDom().setToolbarPlace(e.toolbarMenu),e.msgErrData(),e.select&&e.selectVal(e.selectInitVal),e.bak=e.obj.html(),e.done(o,e.obj)}else"layuiStyle"==e.dataStyle?(e.obj.html(e.getNoneDom().errText(o[e.response.message])),e.error(null,a,o[e.response.message])):(e.obj.html(e.getNoneDom().errText(o.status[e.response.message])),e.error(null,a,o.status[e.response.message]))},error:function(t,o,a){e.obj.html(e.getNoneDom().errText(o+": "+a)),e.error(t,o,a)},complete:function(t,i){e.load&&o.close(a),e.complete(t,i)}})}else o.msg("树组件未成功加载，请检查配置",{icon:5})},he.prototype.getChild=function(e,a){var i=this,n=e.next("ul");if(i.setNodeParam(e),void 0!==a){if(void 0===a.length)return void o.msg("数据解析异常，data数据格式不正确",{icon:5});if(n.html(""),"list"==i.dataFormat){var r=i.node.nodeId,s=parseInt(i.node.level)+1,l=i.queryListTreeByPid(r,a);i.loadListTree(l,i.data,s)}else i.loadTree(a,s);i.showLine(),i.toolbar&&"contextmenu"!=i.toolbarWay&&i.setToolbarDom().setToolbarPlace(i.toolbarMenu),i.msgErrData(),i.bak=i.obj.html()}else{if(!i.url)return void o.msg("数据请求异常，url参数未指定",{icon:5});n.html("");var d=i.load?o.load(1):"";de({async:i.async,headers:i.headers,type:i.method,url:i.url,dataType:i.dataType,withCredentials:i.withCredentials,data:i.getFilterRequestParam(i.getRequestParam()),success:function(e){"string"==typeof e&&(e=t.parseJSON(e));var o="";if((o="layuiStyle"==i.dataStyle?e[i.response.statusName]:e.status[i.response.statusName])==i.response.statusCode){var a=i.node.nodeId,r=parseInt(i.node.level)+1;if("list"==i.dataFormat){var s=i.queryListTreeByPid(a,e[i.response.rootName]);i.loadListTree(s,e[i.response.rootName],r,n)}else i.loadTree(e[i.response.rootName],r,n);i.showLine(),i.toolbar&&"contextmenu"!=i.toolbarWay&&i.setToolbarDom().setToolbarPlace(i.toolbarMenu),i.msgErrData(),n.addClass(m),i.bak=i.obj.html()}else"layuiStyle"==i.dataStyle?(i.obj.html(i.getNoneDom().errText(e[i.response.message])),i.error(null,o,e[i.response.message])):(i.obj.html(i.getNoneDom().errText(e.status[i.response.message])),i.error(null,o,e.status[i.response.message]))},error:function(e,t,o){i.obj.html(i.getNoneDom().errText(t+": "+o)),i.error(e,t,o)},complete:function(e,t){i.load&&o.close(d),i.complete(e,t)}})}},he.prototype.loadListTree=function(e,t,o,a){var i=this;if(a=a||i.getNodeDom().nowOrRootUl(),e.length>0)for(var n=0;n<e.length;n++){var r=e[n];if("object"===(void 0===r?"undefined":_typeof(r))){var s=i.parseData(r),l=i.queryListTreeByPid(s.treeId(),t);if(a.append(i.getLiItemDom(s.treeId(),s.parentId(),s.title(),s.fmtTitle(),s.last(l.length),s.ficonClass(),s.iconClass(),s.checkArr(),o,s.spread(o),s.disabled(),s.hide(),s.basicData(),s.recordData(),a.hasClass(h)?"root":"item")),l.length>0){var d=parseInt(o)+1;i.loadListTree(l,t,d,i.obj.find("ul[data-id='"+s.treeId()+"']"))}}}},he.prototype.queryListTreeByPid=function(e,t){var o=this,a=[];if(t)for(var i=0;i<t.length;i++){var n=t[i];"object"===(void 0===n?"undefined":_typeof(n))&&("null"==e||null==e?null==n[o.response.parentId]&&a.push(n):n[o.response.parentId]==e&&(n[o.response.treeId]==e?o.errData.push(n):a.push(n)))}return a},he.prototype.loadTree=function(e,t,o){var a=this;if(e){o=o||a.getNodeDom().nowOrRootUl();for(var i=0;i<e.length;i++){var n=e[i];if("object"===(void 0===n?"undefined":_typeof(n))){n[a.response.treeId]==n[a.response.parentId]&&a.errData.push(n);var r=a.parseData(n),s=r.children();if(o.append(a.getLiItemDom(r.treeId(),r.parentId(),r.title(),r.fmtTitle(),r.last(s.length),r.ficonClass(),r.iconClass(),r.checkArr(),t,r.spread(t),r.disabled(),r.hide(),r.basicData(),r.recordData(),o.hasClass(h)?"root":"item")),0!=s.length){var l=parseInt(t)+1;a.loadTree(s,l,a.obj.find("ul[data-id='"+r.treeId()+"']"))}}}}},he.prototype.msgErrData=function(){var e=this;if(e.errData.length>0&&e.errDataShow){for(var t="",a=0;a<e.errData.length;a++){t+="数据：【"+e.errData[a][e.response.title]+"】中节点id和上级id值一致！ \n"}o.msg(t,{icon:2,time:5e3})}e.errData=[]},he.prototype.parseData=function(e){var t=this;return{treeId:function(){return e[t.response.treeId]},parentId:function(){return e[t.response.parentId]},fmtTitle:function(){if("function"==typeof t.formatter.title){var o=t.formatter.title(e),a=e[t.response.title];return(a=""==o||null==o||null==o?a:o)||""}return e[t.response.title]},title:function(){return e[t.response.title]},level:function(){return e[t.response.level]||""},ficonClass:function(){return e[t.response.ficonClass]||""},iconClass:function(){return e[t.response.iconClass]||""},last:function(o){return 0==o?"boolean"!=typeof e[t.response.last]||e[t.response.last]:"boolean"==typeof e[t.response.last]&&e[t.response.last]},spread:function(o){return o<t.initLevel?"boolean"!=typeof e[t.response.spread]||e[t.response.spread]:"boolean"==typeof e[t.response.spread]&&e[t.response.spread]},disabled:function(){return"boolean"==typeof e[t.response.disabled]&&e[t.response.disabled]},hide:function(){return"boolean"==typeof e[t.response.hide]&&e[t.response.hide]},checkArr:function(){var o=[],a=e[t.response.checkArr];return"string"==typeof a&&(a=a.indexOf("{")>-1&&a.indexOf("}")>-1?JSON.parse(a):{type:"0",checked:a}),"object"===(void 0===a?"undefined":_typeof(a))&&(void 0===a.length?o.push(a):o=a),o.length>0&&o.length>t.checkArrLen&&(t.checkArrLen=o.length),o},children:function(){return e[t.response.childName]||[]},basicData:function(){return ne.escape(JSON.stringify(e[t.response.basicData]))||JSON.stringify({})},recordData:function(){var o=t.record?ne.cloneObj(e,[t.response.treeId,t.response.parentId,t.response.title,t.response.iconClass,t.response.childName,t.response.last,t.response.spread,t.response.disabled,t.response.hide,t.response.checkArr,t.response.checked,t.response.type,t.response.basicData]):{};return ne.escape(JSON.stringify(o))},data:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){return e}))}},he.prototype.getNoneDom=function(){var e=this.obj[0].id,t=this.none;return{text:function(){return"<div class='"+s+"' dtree-id='"+e+"'>"+t+"</div>"},errText:function(t){return"<div class='"+s+"' dtree-id='"+e+"'>"+t+"</div>"}}},he.prototype.getDom=function(e,t,o,a,i,n,r,s,l,d,h,u){var f=this,p=f.obj[0].id,b=(f.toolbar,f.checkbar);return{fnode:function(){var t=f.fnodeIcon,o=f.fleafIcon,a=f.usefontStyle.fnode.leaf,r=f.usefontStyle.fnode.node.open,s=f.usefontStyle.fnode.node.close;if(n){var l=f.iconfont;"string"==typeof l?(a=l+" "+n,r=l+" "+n,s=l+" "+n):(a=l[0]+" "+n,r=l[0]+" "+n,s=l[0]+" "+n)}return"-1"!=t&&"-1"!=o?i?"<i class='"+a+" "+f.style.dfont+" "+f.style.ficon+"' data-spread='last' data-id='"+e+"' dtree-id='"+p+"'></i>":d?"<i class='"+r+" "+f.style.dfont+" "+f.style.ficon+"' data-spread='open' data-id='"+e+"' dtree-id='"+p+"'></i>":"<i class='"+s+" "+f.style.dfont+" "+f.style.ficon+"' data-spread='close' data-id='"+e+"' dtree-id='"+p+"' data-iconClass='"+n+"'></i>":"-1"!=t&&"-1"==o?i?"<i class='"+a+" "+g+" "+f.style.dfont+" "+f.style.ficon+"' data-spread='last' data-id='"+e+"' dtree-id='"+p+"'></i>":d?"<i class='"+r+" "+f.style.dfont+" "+f.style.ficon+"' data-spread='open' data-id='"+e+"' dtree-id='"+p+"'></i>":"<i class='"+s+" "+f.style.dfont+" "+f.style.ficon+"' data-spread='close' data-id='"+e+"' dtree-id='"+p+"' data-iconClass='"+n+"'></i>":"-1"==t&&"-1"!=o?i?"<i class='"+a+" "+f.style.dfont+" "+f.style.ficon+"' data-spread='last' data-id='"+e+"' dtree-id='"+p+"'></i>":d?"<i class='"+r+" "+f.style.dfont+" "+f.style.ficon+"' data-spread='open' data-id='"+e+"' dtree-id='"+p+"'></i>":"<i class='"+s+" "+f.style.dfont+" "+f.style.ficon+"' data-spread='close' data-id='"+e+"' dtree-id='"+p+"' data-iconClass='"+n+"'></i>":"-1"==t&&"-1"==o?i?"<i class='"+a+" "+g+" "+f.style.dfont+" "+f.style.ficon+"' data-spread='last' data-id='"+e+"' dtree-id='"+p+"' style='display:none;'></i>":d?"<i class='"+r+" "+f.style.dfont+" "+f.style.ficon+"' data-spread='open' data-id='"+e+"' dtree-id='"+p+"'></i>":"<i class='"+s+" "+f.style.dfont+" "+f.style.ficon+"' data-spread='close' data-id='"+e+"' dtree-id='"+p+"' data-iconClass='"+n+"'></i>":void 0},node:function(){var t=f.nodeIcon,o=f.leafIcon,a=f.usefontStyle.snode.leaf,n=f.usefontStyle.snode.node.open,s=f.usefontStyle.snode.node.close;if(r){var l=f.iconfont;"string"==typeof l?(a=l+" "+r,n=l+" "+r,s=l+" "+r):(a=l[0]+" "+r,n=l[0]+" "+r,s=l[0]+" "+r)}return"-1"!=t&&"-1"!=o||"-1"!=t&&"-1"==o||"-1"==t&&"-1"!=o||"-1"==t&&"-1"==o?i?"<i class='"+a+" "+"dtreefont-special "+f.style.dfont+" "+f.style.icon+"' data-spread='last' data-id='"+e+"' dtree-id='"+p+"' data-iconClass='"+r+"'></i>":d?"<i class='"+n+" "+"dtreefont-special "+f.style.dfont+" "+f.style.icon+"' data-spread='open' data-id='"+e+"' dtree-id='"+p+"' data-iconClass='"+r+"'></i>":"<i class='"+s+" "+"dtreefont-special "+f.style.dfont+" "+f.style.icon+"' data-spread='close' data-id='"+e+"' dtree-id='"+p+"' data-iconClass='"+r+"'></i>":void 0},checkbox:function(){var t=!1;if("node"==f.checkbarLoad?b&&(t=!0):i&&b&&(t=!0),t){var o="<div class='"+c+"' data-id='"+e+"' dtree-id='"+p+"'>";if(s&&s.length>0)for(var a=0;a<s.length;a++){var n=s[a],r=n.checked,l=f.usefontStyle.checkbox.out;l="2"==r?f.usefontStyle.checkbox.noall+" "+f.style.chs:"1"==r?f.usefontStyle.checkbox.on+" "+f.style.chs:f.usefontStyle.checkbox.out;var d="";h&&(d=v),o+="<i class='"+l+" "+f.style.dfont+" "+f.style.cbox+" "+d+"' data-id='"+e+"' dtree-id='"+p+"' data-checked='"+n.checked+"' data-initchecked='"+n.checked+"' data-type='"+n.type+"' dtree-click='"+$+"' data-par='."+"d-click-checkbar' dtree-disabled='"+h+"'></i>"}return o+="</div>"}return""},text:function(){var t="";return h&&(t=v),"<cite class='t-click "+t+"' data-id='"+e+"' data-leaf='"+(i?"leaf":"node")+"' dtree-disabled='"+h+"' data-title='"+o+"' >"+a+"</cite>"},ul:function(){return i?"<ul class='dtree-nav-ul-sid' data-id='"+e+"' dtree-id='"+p+"'></ul>":d?"<ul class='dtree-nav-ul-sid "+m+"' data-id='"+e+"' dtree-id='"+p+"'></ul>":"<ul class='dtree-nav-ul-sid' data-id='"+e+"' dtree-id='"+p+"'></ul>"}}},he.prototype.replaceDom=function(e,o,a,i,n,r){var s=this,l=s.obj[0].id,d=(s.toolbar,s.checkbar);return{fnode:function(n){var r="",d=s.fnodeIcon,c=(s.fleafIcon,s.usefontStyle.fnode.leaf),h=s.usefontStyle.fnode.node.open,u=s.usefontStyle.fnode.node.close;if(n){var f=s.iconfont;"string"==typeof f?(c=f+" "+n,h=f+" "+n,u=f+" "+n):(c=f[0]+" "+n,h=f[0]+" "+n,u=f[0]+" "+n)}("-1"!=d&&"-1"!=leafIcon||"-1"!=nodeIcon&&"-1"==leafIcon||"-1"==nodeIcon&&"-1"!=leafIcon||"-1"==nodeIcon&&"-1"==leafIcon)&&(r=a?"<i class='"+c+" "+"dtreefont-special "+s.style.dfont+" "+s.style.icon+"' data-spread='last' data-id='"+o+"' dtree-id='"+l+"' data-iconClass='"+iconClass+"'></i>":i?"<i class='"+h+" "+"dtreefont-special "+s.style.dfont+" "+s.style.icon+"' data-spread='open' data-id='"+o+"' dtree-id='"+l+"' data-iconClass='"+iconClass+"'></i>":"<i class='"+u+" "+"dtreefont-special "+s.style.dfont+" "+s.style.icon+"' data-spread='close' data-id='"+o+"' dtree-id='"+l+"' data-iconClass='"+n+"'></i>"),""!=r&&s.getNodeDom(e).fnode().replaceWith(t(r))},node:function(n){var r="",d=s.nodeIcon,c=s.leafIcon,h=s.usefontStyle.snode.leaf,u=s.usefontStyle.snode.node.open,f=s.usefontStyle.snode.node.close;if(n){var p=s.iconfont;"string"==typeof p?(h=p+" "+n,u=p+" "+n,f=p+" "+n):(h=p[0]+" "+n,u=p[0]+" "+n,f=p[0]+" "+n)}("-1"!=d&&"-1"!=c||"-1"!=d&&"-1"==c||"-1"==d&&"-1"!=c||"-1"==d&&"-1"==c)&&(r=a?"<i class='"+h+" "+"dtreefont-special "+s.style.dfont+" "+s.style.icon+"' data-spread='last' data-id='"+o+"' dtree-id='"+l+"' data-iconClass='"+n+"'></i>":i?"<i class='"+u+" "+"dtreefont-special "+s.style.dfont+" "+s.style.icon+"' data-spread='open' data-id='"+o+"' dtree-id='"+l+"' data-iconClass='"+n+"'></i>":"<i class='"+f+" "+"dtreefont-special "+s.style.dfont+" "+s.style.icon+"' data-spread='close' data-id='"+o+"' dtree-id='"+l+"' data-iconClass='"+n+"'></i>"),""!=r&&s.getNodeDom(e).snode().replaceWith(t(r))},checkbox:function(i){var r=!1;if("node"==s.checkbarLoad?d&&(r=!0):a&&d&&(r=!0),r){var h="<div class='"+c+"' data-id='"+o+"' dtree-id='"+l+"'>";if(i&&i.length>0)for(var u=0;u<i.length;u++){var f=i[u],p=f.checked,b=s.usefontStyle.checkbox.out;b="2"==p?s.usefontStyle.checkbox.noall+" "+s.style.chs:"1"==p?s.usefontStyle.checkbox.on+" "+s.style.chs:s.usefontStyle.checkbox.out;var m="";n&&(m=v),h+="<i class='"+b+" "+s.style.dfont+" "+s.style.cbox+" "+m+"' data-id='"+o+"' dtree-id='"+l+"' data-checked='"+f.checked+"' data-initchecked='"+f.checked+"' data-type='"+f.type+"' dtree-click='"+$+"' data-par='."+"d-click-checkbar' dtree-disabled='"+n+"'></i>"}h+="</div>",s.getNodeDom(e).snode().next("div").replaceWith(t(h))}},text:function(i){var r="";n&&(r=v);var l="<cite class='t-click "+r+"' data-id='"+o+"' data-leaf='"+(a?"leaf":"node")+"' dtree-disabled='"+n+"' >"+i+"</cite>";s.getNodeDom(e).cite().replaceWith(t(l))},ul:function(){var n=a?"<ul class='dtree-nav-ul-sid' data-id='"+o+"' dtree-id='"+l+"'></ul>":i?"<ul class='dtree-nav-ul-sid "+m+"' data-id='"+o+"' dtree-id='"+l+"'></ul>":"<ul class='dtree-nav-ul-sid' data-id='"+o+"' dtree-id='"+l+"'></ul>";s.getNodeDom(e).nextUl().replaceWith(t(n))},div:function(){e.attr("data-id",o)},basicData:function(t){t="{}"==t?"":t,e.attr("data-basic",t)},recordData:function(t){t="{}"==t?"":t,e.attr("data-record",t)},p_li:function(t){var a=e.parent("li");return a.attr("data-id",o),t&&a.attr("data-pid",t),a}}},he.prototype.getLiItemDom=function(e,t,o,a,i,n,r,s,l,d,c,h,u,f,p){var b=this,m=b.obj[0].id,v=b.getDom(e,t,o,a,i,n,r,s,l,d,c,h);u="{}"==u?"":u,f="{}"==f?"":f;var g="<div class='dtree-nav-div "+b.style.item+"' data-id='"+e+"' dtree-id='"+m+"' dtree-click='"+V+"' data-basic='"+u+"' data-record='"+f+"' dtree-disabled='"+c+"' dtree-hide='"+h+"' ";b.toolbar&&"contextmenu"==b.toolbarWay?("node"==b.toolbarLoad&&(g+=" d-contextmenu='true'>"),"noleaf"==b.toolbarLoad&&(g+=i?" d-contextmenu='false'>":" d-contextmenu='true'>"),"leaf"==b.toolbarLoad&&(g+=i?" d-contextmenu='true'>":" d-contextmenu='false'>")):g+=" d-contextmenu='false'>";var k="";return h&&(k=y),["<li class='d-click-checkbar dtree-nav-item "+k+" 'data-id='"+e+"'data-pid='"+("root"==p?void 0!==(void 0===t?"undefined":_typeof(t))&&""!=t?t:"-1":t)+"'dtree-id='"+m+"'data-index='"+l+"'dtree-hide='"+h+"'>"+g,v.fnode(),v.node(),v.checkbox(),v.text(),"</div>",v.ul(),"</li>"].join("")},he.prototype.dataInit=function(e){var t=this,o=t.obj.find("div[data-id='"+e+"']");t.getNodeDom(o).parentLi().find("."+b).removeClass(b),t.getNodeDom(o).parentLi().find("."+t.style.itemThis).removeClass(t.style.itemThis),o.addClass(b),o.addClass(t.style.itemThis),t.setNodeParam(o);var a=o.parents("."+n);return a.children("ul").addClass(m),a.children("."+r).children("i[data-spread]."+ne.trimToDot(t.usefontStyle.fnode.node.close)).addClass(t.usefontStyle.fnode.node.open),a.children("."+r).children("i[data-spread]."+ne.trimToDot(t.usefontStyle.fnode.node.close)).removeClass(t.usefontStyle.fnode.node.close),a.children("."+r).children("i[data-spread]."+ne.trimToDot(t.usefontStyle.snode.node.close)).addClass(t.usefontStyle.snode.node.open),a.children("."+r).children("i[data-spread]."+ne.trimToDot(t.usefontStyle.snode.node.close)).removeClass(t.usefontStyle.snode.node.close),t.getNowParam()},he.prototype.rollbackHtml=function(e){var t=this;t.bak&&(t.obj.html(t.bak),t.cancelNavThis(),t.checkbar?(t.cancelCheckedNode(),t.chooseDataInit(e)):t.dataInit(e),t.bak=t.obj.html())},he.prototype.escape=function(e){return ne.escape(e)},he.prototype.unescape=function(e){return ne.unescape(e)},he.prototype.cancelNavThis=function(){var e=this;e.obj.find("div[data-id]").parent().find("."+b).removeClass(b),e.obj.find("div[data-id]").parent().find("."+e.style.itemThis).removeClass(e.style.itemThis)},he.prototype.navThis=function(e){var t=this,o="object"===(void 0===e?"undefined":_typeof(e))?e:0==t.obj.find("div[dtree-click='"+V+"'][data-id='"+e+"']").length?null:t.obj.find("div[dtree-click='"+V+"'][data-id='"+e+"']");null!=o&&(t.cancelNavThis(),o.addClass(b),o.addClass(t.style.itemThis))},he.prototype.accordionUL=function(e){var o=this;if(o.accordion){e.closest("li[data-index]").siblings("li[data-index]").children("ul[data-id]").removeClass(m);var a=e.closest("li[data-index]").siblings("li[data-index]").children("ul[data-id]").prev("div");if(a.length&&a.length>0)for(var i=0;i<a.length;i++){var n=t(a[i]),r=o.getNodeDom(n).fnode(),s=o.getNodeDom(n).snode();"last"!=r.attr("data-spread")&&o.operateIcon(r,s).close()}}},he.prototype.clickSpread=function(e){var t=this,o=t.getNodeDom(e).fnode(),a=t.getNodeDom(e).snode(),i=(t.getNodeDom(e).cite(),o.attr("data-spread")),n=e.next("ul");n.length>0&&("close"==i?("load"==t.type?t.cache?n.html()?(n.addClass(m),t.accordionUL(n)):(t.getChild(e),t.accordionUL(n)):(n.html(""),t.getChild(e),t.accordionUL(n)):(n.addClass(m),t.accordionUL(n)),t.operateIcon(o,a).open()):"open"==i&&(n.removeClass(m),t.operateIcon(o,a).close()))},he.prototype.setDisabledNodes=function(e){for(var t=e.split(","),o=0;o<t.length;o++){var a=this.getNodeDom(t[o]).div(),i=a.children("div."+c).children("i[data-par]"),n=a.children("cite[data-leaf]");null!=a&&"true"!=a.attr("dtree-disabled")&&(a.attr("dtree-disabled","true"),i.attr("dtree-disabled","true"),i.addClass(v),n.attr("dtree-disabled","true"),n.addClass(v))}},he.prototype.setDisabledAllNodes=function(){this.obj.find("div[dtree-click='"+V+"']").each((function(){var e=t(this),o=e.children("div."+c).children("i[data-par]"),a=e.children("cite[data-leaf]");null!=e&&"true"!=e.attr("dtree-disabled")&&(e.attr("dtree-disabled","true"),o.attr("dtree-disabled","true"),o.addClass(v),a.attr("dtree-disabled","true"),a.addClass(v))}))},he.prototype.cancelDisabledNodes=function(e){for(var t=e.split(","),o=0;o<t.length;o++){var a=this.getNodeDom(t[o]).div(),i=a.children("div."+c).children("i[data-par]"),n=a.children("cite[data-leaf]");null!=a&&"true"==a.attr("dtree-disabled")&&(a.attr("dtree-disabled","false"),i.attr("dtree-disabled","false"),i.removeClass(v),n.attr("dtree-disabled","false"),n.removeClass(v))}},he.prototype.getDisabledNodesParam=function(e){for(var t=this,o=e.split(","),a=[],i=0;i<o.length;i++){var n=t.getNodeDom(o[i]).div();null!=n&&"true"==n.attr("dtree-disabled")&&a.push(t.getRequestParam(t.getTempNodeParam(n)))}return a},he.prototype.getAllDisabledNodesParam=function(){var e=this,o=[];return e.obj.find("div[dtree-click='"+V+"'][dtree-disabled='true']").each((function(){var a=t(this);o.push(e.getRequestParam(e.getTempNodeParam(a)))})),o},he.prototype.setHideNodes=function(e){for(var t=e.split(","),o=0;o<t.length;o++){var a=this.getNodeDom(t[o]).div(),i=a.parent("li[dtree-hide]");null!=a&&"true"!=a.attr("dtree-hide")&&(a.attr("dtree-hide","true"),i.attr("dtree-hide","true"),i.addClass(y))}},he.prototype.cancelHideNodes=function(e){for(var t=e.split(","),o=0;o<t.length;o++){var a=this.getNodeDom(t[o]).div(),i=a.parent("li[dtree-hide]");null!=a&&"true"==a.attr("dtree-hide")&&(a.attr("dtree-hide","false"),i.attr("dtree-hide","false"),i.removeClass(y))}},he.prototype.getHideNodesParam=function(e){for(var t=this,o=e.split(","),a=[],i=0;i<o.length;i++){var n=t.getNodeDom(o[i]).div();null!=n&&"true"==n.attr("dtree-hide")&&a.push(t.getRequestParam(t.getTempNodeParam(n)))}return a},he.prototype.getAllHideNodesParam=function(){var e=this,o=[];return e.obj.find("div[dtree-click='"+V+"'][dtree-hide='true']").each((function(){var a=t(this);o.push(e.getRequestParam(e.getTempNodeParam(a)))})),o},he.prototype.refreshTree=function(){var e=this;e.obj.html(""),e.initNodeParam(),e.init()},he.prototype.partialRefreshAdd=function(e,t){var a=this;$ul=e.next("ul");var i=e.find("i[data-spread]");if("last"==i.eq(0).attr("data-spread")?a.operateIcon(i.eq(0),i.eq(1)).openWithLeaf():a.operateIcon(i.eq(0),i.eq(1)).open(),$ul.addClass(m),a.accordionUL($ul),t)if(t.length&&t.length>0)a.getChild(e,t);else{var n=a.parseData(t);if(n.treeId()){var r=parseInt(e.parent("li").attr("data-index"))+1;$ul.append(a.getLiItemDom(n.treeId(),n.parentId(),n.title(),n.fmtTitle(),n.last(0),n.ficonClass(),n.iconClass(),n.checkArr(),r,n.spread(),n.disabled(),n.hide(),n.basicData(),n.recordData(),"item")),$thisDiv=$ul.find("div[data-id='"+n.treeId()+"']"),a.setNodeParam($thisDiv),a.showLine($ul.find("li"))}else o.msg("添加失败,节点ID为undefined！",{icon:5}),a.setNodeParam(e)}else a.getChild(e)},he.prototype.partialRefreshEdit=function(e,t){var a=this;if($ul=e.next("ul"),$p_li=e.parent("li"),t)if("object"===(void 0===t?"undefined":_typeof(t))){var i=a.parseData(t);if(i.treeId()){var n=a.replaceDom(e,i.treeId(),i.last(0),i.spread(),i.disabled(),i.hide());n.div(),n.node(i.iconClass()),n.checkbox(i.checkArr()),n.text(i.title()),n.ul(),n.basicData(i.basicData()),n.recordData(i.recordData());var r=i.parentId(),s=$p_li.attr("data-pid");if(r&&r!=s){$p_li=n.p_li(r);var l=a.getNodeDom(r).div(),d=a.getNodeDom(r).nextUl();if(0==d.children("li").length){var c=l.find("i[data-spread]");a.operateIcon(c.eq(0),c.eq(1)).openWithLeaf(),d.addClass(m)}d.append($p_li)}else n.p_li();a.setNodeParam(e)}else o.msg("编辑失败,节点ID为undefined！",{icon:5}),a.setNodeParam(e)}else a.getNodeDom(e).cite().html(t)},he.prototype.partialRefreshDel=function(e){var t=this;if($p_li=e.parent("li"),$p_ul=t.getNodeDom(e).parentUl(),$p_div=t.getNodeDom(e).parentDiv(),$p_li.remove(),t.showLine($p_ul.find("li")),0==$p_ul.children("li").length){var o=$p_div.find("i[data-spread]");t.operateIcon(o.eq(0),o.eq(1)).closeWithLeaf()}t.initNodeParam()},he.prototype.chooseDataInit=function(e){for(var o=this,a=e.split(","),i=0;i<a.length;i++)o.obj.find("i[dtree-click='"+$+"']").each((function(){t(this).attr("data-id")==a[i]&&o.checkStatus(t(this)).check()}));var s=o.obj.find("i[dtree-click='"+$+"'][data-checked='1']").parents("."+n);return s.children("ul").addClass(m),s.children("."+r).children("i[data-spread]."+ne.trimToDot(o.usefontStyle.fnode.node.close)).addClass(o.usefontStyle.fnode.node.open),s.children("."+r).children("i[data-spread]."+ne.trimToDot(o.usefontStyle.fnode.node.close)).removeClass(o.usefontStyle.fnode.node.close),s.children("."+r).children("i[data-spread]."+ne.trimToDot(o.usefontStyle.snode.node.close)).addClass(o.usefontStyle.snode.node.open),s.children("."+r).children("i[data-spread]."+ne.trimToDot(o.usefontStyle.snode.node.close)).removeClass(o.usefontStyle.snode.node.close),o.getCheckbarNodesParam()},he.prototype.checkAllOrNot=function(e){var t=this,o=e.attr("data-par"),a=e.attr("data-type"),i=e.closest(o),n=e.parents(o),r=i.find(o);if("1"==e.attr("data-checked")){t.checkStatus(e).noCheck();var s=r.find(">.dtree-nav-div>."+c+">i[data-type='"+a+"']");t.checkStatus(s).noCheck();for(var l=1,d=n;l<d.length;l++){if(0==d.eq(l).find(">.dtree-nav-ul-sid ."+c+">i[data-type='"+a+"'][data-checked='1']").length){var h=d.eq(l).find(">.dtree-nav-div>."+c+">i[data-type='"+a+"']");t.checkStatus(h).noCheck()}}}else{t.checkStatus(e).check();s=r.find(">.dtree-nav-div>."+c+">i[data-type='"+a+"']");t.checkStatus(s).check();for(l=1,d=n;l<d.length;l++){h=d.eq(l).find(">.dtree-nav-div>."+c+">i[data-type='"+a+"']");t.checkStatus(h).check()}}},he.prototype.checkAllOrNoallOrNot=function(e){var t=this,o=(e.closest("."+r),e.attr("data-par")),a=e.attr("data-type"),i=e.closest(o),n=e.parents(o),s=i.find(o);if("1"==e.attr("data-checked")){t.checkStatus(e).noCheck();var l=s.find(">.dtree-nav-div>."+c+">i[data-type='"+a+"']");t.checkStatus(l).noCheck();for(var d=1,h=n;d<h.length;d++){var u=h.eq(d).find(">.dtree-nav-ul-sid ."+c+">i[data-type='"+a+"'][data-checked='1']").length,f=h.eq(d).find(">.dtree-nav-div>."+c+">i[data-type='"+a+"']");0==u?t.checkStatus(f).noCheck():t.checkStatus(f).noallCheck()}}else{t.checkStatus(e).check();l=s.find(">.dtree-nav-div>."+c+">i[data-type='"+a+"']");t.checkStatus(l).check();for(d=1,h=n;d<h.length;d++){var p=h.eq(d).find(">.dtree-nav-ul-sid ."+c+">i[data-type='"+a+"'][data-checked='1']").length,b=h.eq(d).find(">.dtree-nav-ul-sid ."+c+">i[data-type='"+a+"']").length;f=h.eq(d).find(">.dtree-nav-div>."+c+">i[data-type='"+a+"']");p!=b?t.checkStatus(f).noallCheck():t.checkStatus(f).check()}}},he.prototype.checkAllOrPcascOrNot=function(e){var t=this,o=(e.closest("."+r),e.attr("data-par")),a=e.attr("data-type"),i=e.closest(o),n=(e.parents(o),i.find(o));if("1"==e.attr("data-checked")){t.checkStatus(e).noCheck();var s=n.find(">.dtree-nav-div>."+c+">i[data-type='"+a+"']");t.checkStatus(s).noCheck()}else{t.checkStatus(e).check();s=n.find(">.dtree-nav-div>."+c+">i[data-type='"+a+"']");t.checkStatus(s).check()}},he.prototype.checkOrNot=function(e){e.closest("."+r);var t=e.attr("data-par"),o=(e.attr("data-type"),e.closest(t));e.parents(t),o.find(t);"1"==e.attr("data-checked")?this.checkStatus(e).noCheck():this.checkStatus(e).check()},he.prototype.checkOnly=function(e){var t=this,o=(e.closest("."+r),e.attr("data-par")),a=(e.attr("data-type"),e.closest(o)),i=(e.parents(o),a.find(o),e.attr("data-checked")),n=t.obj.find("i[data-checked]");t.checkStatus(n).noCheck(),"1"!=i&&t.checkStatus(e).check()},he.prototype.changeCheck=function(e){var o=this,a=o.temp;void 0===e&&(e=a[0]),"all"==o.checkbarType?o.checkAllOrNot(e):"no-all"==o.checkbarType?o.checkAllOrNoallOrNot(e):"p-casc"==o.checkbarType?o.checkAllOrPcascOrNot(e):"self"==o.checkbarType?o.checkOrNot(e):"only"==o.checkbarType?o.checkOnly(e):o.checkAllOrNot(e),o.select&&o.selectCheckboxVal();var i=o.setAndGetCheckbarNodesParam(!0);o.checkbarFun.chooseDone(i),layui.event.call(this,D,"chooseDone("+t(o.obj)[0].id+")",{checkbarParams:i}),o.temp=[]},he.prototype.initNoAllCheck=function(){var e=this,o=e.obj.find("i[data-checked='1']");if(o.length>0)for(var a=0;a<o.length;a++)for(var i=t(o[a]),n=i.attr("data-par"),r=i.attr("data-type"),s=i.closest(n),l=i.parents(n),d=(s.find(n),1),h=l;d<h.length;d++){var u=h.eq(d).find(">.dtree-nav-ul-sid ."+c+">i[data-type='"+r+"'][data-checked='1']").length,f=h.eq(d).find(">.dtree-nav-ul-sid ."+c+">i[data-type='"+r+"']").length,p=h.eq(d).find(">.dtree-nav-div>."+c+">i[data-type='"+r+"']");u!=f?e.checkStatus(p).noallCheck():e.checkStatus(p).check()}},he.prototype.initAllCheck=function(){var e=this.obj.find("i[data-checked='1']");if(e.length>0)for(var o=0;o<e.length;o++)for(var a=t(e[o]),i=a.attr("data-par"),n=a.attr("data-type"),r=a.closest(i),s=a.parents(i),l=(r.find(i),1),d=s;l<d.length;l++){var h=d.eq(l).find(">.dtree-nav-div>."+c+">i[data-type='"+n+"']");this.checkStatus(h).check()}},he.prototype.checkStatus=function(e){var t=this;return{check:function(){e.removeClass(t.usefontStyle.checkbox.out),e.removeClass(t.usefontStyle.checkbox.noall),e.addClass(t.usefontStyle.checkbox.on),e.addClass(t.style.chs),e.attr("data-checked","1")},noCheck:function(){e.removeClass(t.usefontStyle.checkbox.noall),e.removeClass(t.usefontStyle.checkbox.on),e.removeClass(t.style.chs),e.addClass(t.usefontStyle.checkbox.out),e.attr("data-checked","0")},noallCheck:function(){e.removeClass(t.usefontStyle.checkbox.out),e.removeClass(t.usefontStyle.checkbox.on),e.addClass(t.usefontStyle.checkbox.noall),e.addClass(t.style.chs),e.attr("data-checked","2")}}},he.prototype.setAndGetCheckbarNodesParam=function(e){var o=this;return o.checkbarNode=[],"change"==o.checkbarData?o.obj.find("i[data-par][dtree-disabled='false']").each((function(){var a=t(this),i=a.closest("."+r);a.attr("data-checked")!=a.attr("data-initchecked")&&(e?o.checkbarNode.push(o.getRequestParam(o.getCheckbarNodeParam(i,a))):o.checkbarNode.push(o.getCheckbarNodeParam(i,a)))})):"all"==o.checkbarData?o.obj.find("i[data-par][data-checked][dtree-disabled='false']").each((function(){var a=t(this),i=a.closest("."+r);e?o.checkbarNode.push(o.getRequestParam(o.getCheckbarNodeParam(i,a))):o.checkbarNode.push(o.getCheckbarNodeParam(i,a))})):"choose"==o.checkbarData?o.obj.find("i[data-par][data-checked='1'][dtree-disabled='false']").each((function(){var a=t(this),i=a.closest("."+r);e?o.checkbarNode.push(o.getRequestParam(o.getCheckbarNodeParam(i,a))):o.checkbarNode.push(o.getCheckbarNodeParam(i,a))})):"halfChoose"==o.checkbarData&&(o.obj.find("i[data-par][data-checked='1'][dtree-disabled='false']").each((function(){var a=t(this),i=a.closest("."+r);e?o.checkbarNode.push(o.getRequestParam(o.getCheckbarNodeParam(i,a))):o.checkbarNode.push(o.getCheckbarNodeParam(i,a))})),o.obj.find("i[data-par][data-checked='2'][dtree-disabled='false']").each((function(){var a=t(this),i=a.closest("."+r);e?o.checkbarNode.push(o.getRequestParam(o.getCheckbarNodeParam(i,a))):o.checkbarNode.push(o.getCheckbarNodeParam(i,a))}))),o.checkbarNode},he.prototype.getCheckbarNodesParam=function(){return this.setAndGetCheckbarNodesParam(!0)},he.prototype.getCheckbarNodeParam=function(e,t){var o=this,a={};a.nodeId=e.attr("data-id"),a.parentId=o.getNodeDom(e).parentLi().attr("data-pid"),a.context="function"==typeof o.formatter.title?o.getNodeDom(e).cite().attr("data-title"):o.getNodeDom(e).cite().text(),a.leaf="leaf"==o.getNodeDom(e).cite().attr("data-leaf"),a.level=o.getNodeDom(e).parentLi().attr("data-index"),a.spread="open"==o.getNodeDom(e).fnode().attr("data-spread");var i=e.attr("data-basic");i&&(i=JSON.parse(ne.unescape(i))),a.basicData=i;var n=e.attr("data-record");return n&&(n=JSON.parse(ne.unescape(n))),a.recordData=n,a.dataType=t.attr("data-type"),a.checked=t.attr("data-checked"),a.initchecked=t.attr("data-initchecked"),a},he.prototype.getCheckbarJsonArrParam=function(){var e={nodeId:[],parentId:[],context:[],leaf:[],level:[],spread:[],dataType:[],checked:[],initchecked:[],basicData:[],recordData:[]},t=this.setAndGetCheckbarNodesParam(!1);if(t&&t.length>0)for(var o=0;o<t.length;o++){var a=t[o];console.log(a),e.nodeId.push(a.nodeId),e.parentId.push(a.parentId),e.context.push(a.context),e.leaf.push(a.leaf),e.level.push(a.level),e.spread.push(a.spread),e.dataType.push(a.dataType),e.checked.push(a.checked),e.initchecked.push(a.initchecked),e.basicData.push(a.basicData),e.recordData.push(a.recordData)}return e=this.getRequestParam(e),console.log(e),e},he.prototype.changeCheckbarNodes=function(){var e=!1;return this.obj.find("i[data-par]").each((function(){var o=t(this);if($div=o.closest("."+r),o.attr("data-checked")!=o.attr("data-initchecked"))return e=!0,!0})),e},he.prototype.clickNodeCheckbar=function(e){var t=this,o=t.getNodeDom(e).checkbox();t.temp=[o],t.changeCheck()},he.prototype.checkAllNode=function(e){var t=this.obj.find("i[data-par][data-checked!='1']");t.length>0&&this.checkStatus(t).check()},he.prototype.cancelCheckedNode=function(e){var t=this.obj.find("i[data-par][data-checked!='0']");t.length>0&&this.checkStatus(t).noCheck()},he.prototype.invertCheckedNode=function(e){var o=this;if(o.obj.find("i[data-par]").length>0){var a=!1;o.obj.find("i[data-par]").each((function(){var e=t(this);"2"==e.attr("data-checked")?a=!0:"0"==e.attr("data-checked")?o.checkStatus(e).check():"1"==e.attr("data-checked")&&o.checkStatus(e).noCheck()})),a?o.initNoAllCheck():o.initAllCheck()}},he.prototype.removeCheckedNode=function(e){var a=this;if(0==a.obj.find("i[data-par][data-checked='1']").length)o.msg("请至少选中一个节点",{icon:2});else{a.checkbarNode=[];a.obj.find("i[data-par][data-checked='1']").each((function(){var e=t(this),o=e.closest("."+r);a.checkbarNode.push(a.getRequestParam(a.getCheckbarNodeParam(o,e)))})),o.confirm("确定要删除选中节点？",{icon:3,title:"删除选中节点"},(function(e){a.menubarFun.remove(a.checkbarNode)&&(a.obj.find("i[data-par][data-checked='1']").closest("."+r).next("ul").remove(),a.obj.find("i[data-par][data-checked='1']").closest("."+r).remove(),a.checkbarNode=[]),o.close(e)}))}},he.prototype.initTreePlus=function(){var e=this;e.obj.prevAll("div#dtree_menubar_"+e.obj[0].id).remove(),e.toolbarMenu={},e.menubar&&e.menubarTips.group&&e.menubarTips.group.length>0&&e.obj.before("<div class='dtree-menubar' id='dtree_menubar_"+e.obj[0].id+"'><div class='layui-btn-group'></div></div>"),e.toolbar&&"contextmenu"==e.toolbarWay&&(e.obj.prevAll("div#dtree_toolbar_"+e.obj[0].id).remove(),e.obj.before("<div class='dtree-toolbar layui-nav' id='dtree_toolbar_"+e.obj[0].id+"'><div class='layui-nav-item'><dl class='layui-nav-child layui-anim'></dl></div></div>"))},he.prototype.openTreePlus=function(){var e=this,t=[];if(e.toolbar&&e.getToolbarDom(),e.menubar){var o=e.menubarTips,a=o.toolbar,i=o.group;o.freedom;if(a&&a.length>0)for(var n=0;n<a.length;n++){var r=a[n];"string"==typeof r&&e.getMenubarToolDom(r),"object"===(void 0===r?"undefined":_typeof(r))&&e.getExtMenubarToolDom(r)}if(i&&i.length>0){for(n=0;n<i.length;n++){var s=i[n];"string"==typeof s&&t.push(e.getMenubarDom(s)),"object"===(void 0===s?"undefined":_typeof(s))&&t.push(e.getExtMenubarDom(s))}e.obj.prevAll("div#dtree_menubar_"+e.obj[0].id).children("div.layui-btn-group").append(t.join(""))}}},he.prototype.getMenubarDom=function(e){var t=this,o=t.obj[0].id,a="";switch(e){case Q:a="<button type='button' class='layui-btn layui-btn-sm layui-btn-primary' dtree-id='"+o+"' d-menu='"+Q+"' title='展开全部节点'><i class='"+t.usefontStyle.menubar.movedown+"'></i></button>";break;case Y:a="<button type='button' class='layui-btn layui-btn-sm layui-btn-primary' dtree-id='"+o+"' d-menu='"+Y+"' title='收缩全部节点'><i class='"+t.usefontStyle.menubar.moveup+"'></i></button>";break;case Z:a="<button type='button' class='layui-btn layui-btn-sm layui-btn-primary' dtree-id='"+o+"' d-menu='"+Z+"' title='刷新'><i class='"+t.usefontStyle.menubar.refresh+"'></i></button>";break;case ee:a=t.checkbar&&"only"!=t.checkbarType?"<button type='button' class='layui-btn layui-btn-sm layui-btn-primary' dtree-id='"+o+"' d-menu='"+ee+"' title='全选节点'><i class='"+t.usefontStyle.menubar.checkAll+"'></i></button>":"";break;case te:a=t.checkbar&&"only"!=t.checkbarType?"<button type='button' class='layui-btn layui-btn-sm layui-btn-primary' dtree-id='"+o+"' d-menu='"+te+"' title='全不选节点'><i class='"+t.usefontStyle.menubar.unCheckAll+"'></i></button>":"";break;case oe:a=t.checkbar&&"only"!=t.checkbarType?"<button type='button' class='layui-btn layui-btn-sm layui-btn-primary' dtree-id='"+o+"' d-menu='"+oe+"' title='反选节点'><i class='"+t.usefontStyle.menubar.invertAll+"'></i></button>":"";break;case ae:a=t.checkbar?"<button type='button' class='layui-btn layui-btn-sm layui-btn-primary' dtree-id='"+o+"' d-menu='"+ae+"' title='删除选中节点'><i class='"+t.usefontStyle.menubar.remove+"'></i></button>":"";break;case ie:a="<button type='button' class='layui-btn layui-btn-sm layui-btn-primary' dtree-id='"+o+"' d-menu='"+ie+"' title='查询节点'><i class='"+t.usefontStyle.menubar.search+"'></i></button>"}return a},he.prototype.getExtMenubarDom=function(e){return"<button type='button' class='layui-btn layui-btn-sm layui-btn-primary' dtree-id='"+this.obj[0].id+"' d-menu='"+e.menubarId+"' title='"+e.title+"'><i class='"+this.usefontStyle.menubarExt+" "+e.icon+"'></i></button>"},he.prototype.getMenubarToolDom=function(e){var t=this;t.obj[0].id;switch(e){case Q:t.toolbarMenu[Q]=t.setToolbarDom().setMenuToolbarOption(Q,t.toolbarStyle.title,t.usefontStyle.toolbar.menubar.movedown,"展开全部");break;case Y:t.toolbarMenu[Y]=t.setToolbarDom().setMenuToolbarOption(Y,t.toolbarStyle.title,t.usefontStyle.toolbar.menubar.moveup,"收缩全部");break;case Z:t.toolbarMenu[Z]=t.setToolbarDom().setMenuToolbarOption(Z,t.toolbarStyle.title,t.usefontStyle.toolbar.menubar.refresh,"刷新");break;case ee:t.checkbar&&"only"!=t.checkbarType&&(t.toolbarMenu[ee]=t.setToolbarDom().setMenuToolbarOption(ee,t.toolbarStyle.title,t.usefontStyle.toolbar.menubar.checkAll,"全选节点"));break;case te:t.checkbar&&"only"!=t.checkbarType&&(t.toolbarMenu[te]=t.setToolbarDom().setMenuToolbarOption(te,t.toolbarStyle.title,t.usefontStyle.toolbar.menubar.unCheckAll,"全不选节点"));break;case oe:t.checkbar&&"only"!=t.checkbarType&&(t.toolbarMenu[oe]=t.setToolbarDom().setMenuToolbarOption(oe,t.toolbarStyle.title,t.usefontStyle.toolbar.menubar.invertAll,"反选节点"));break;case ae:t.checkbar&&(t.toolbarMenu[ae]=t.setToolbarDom().setMenuToolbarOption(ae,t.toolbarStyle.title,t.usefontStyle.toolbar.menubar.remove,"删除选中"));break;case ie:t.toolbarMenu[ie]=t.setToolbarDom().setMenuToolbarOption(ie,t.toolbarStyle.title,t.usefontStyle.toolbar.menubar.searchNode,"查询")}},he.prototype.getExtMenubarToolDom=function(e){var t=this;t.toolbarMenu[e.menubarId]=t.setToolbarDom().setMenuToolbarOption(e.menubarId,e.title,t.usefontStyle.toolbar.menubarExt+" "+e.icon,"")},he.prototype.menubarMethod=function(){var e=this;return{openAllNode:function(o){for(var a=o||e.obj.children("li").children("ul"),i=0;i<a.length;i++){var n=t(a[i]),r=n.prev("div"),s=e.getNodeDom(r).fnode(),l=e.getNodeDom(r).snode(),d=e.getNodeDom(r).cite(),c=s.attr("data-spread");if("leaf"!=d.attr("data-leaf")){"open"==c||("load"==e.type?e.cache?n.html()?n.addClass(m):e.getChild(r):(n.html(""),e.getChild(r)):n.addClass(m),e.operateIcon(s,l).open());var h=n.children("li").children("ul");e.menubarMethod().openAllNode(h)}}},closeAllNode:function(){e.obj.find("."+i).each((function(){var o=t(this),a=o.prev("div"),i=e.getNodeDom(a).fnode(),n=e.getNodeDom(a).snode(),r=e.getNodeDom(a).cite();i.attr("data-spread"),r.attr("data-leaf");o.removeClass(m),e.operateIcon(i,n).close()}))},refreshTree:function(){e.refreshTree()},checkAll:function(){e.checkAllNode()},unCheckAll:function(){e.cancelCheckedNode()},invertAll:function(){e.invertCheckedNode()},remove:function(){e.removeCheckedNode()},searchNode:function(){o.prompt({formType:0,value:"",title:"查询节点"},(function(t,a,i){t?e.searchNode(t)||o.msg("该名称节点不存在！",{icon:5}):o.msg("未指定查询节点名称",{icon:5});o.close(a)}))},extMethod:function(t,o,a){if(e.menubar&&e.menubarTips.group&&e.menubarTips.group.length>0&&"group"==a)for(var i=0;i<e.menubarTips.group.length;i++){if(t==(n=e.menubarTips.group[i]).menubarId){n.handler(e.getRequestParam(e.getNodeParam(o),o));break}}if(e.menubar&&e.menubarTips.toolbar&&e.menubarTips.toolbar.length>0&&"toolbar"==a)for(i=0;i<e.menubarTips.toolbar.length;i++){if(t==(n=e.menubarTips.toolbar[i]).menubarId){n.handler(e.getRequestParam(e.getNodeParam(o),o));break}}if(e.menubar&&e.menubarTips.freedom&&e.menubarTips.freedom.length>0&&"freedom"==a)for(i=0;i<e.menubarTips.freedom.length;i++){var n;if(t==(n=e.menubarTips.freedom[i]).menubarId){n.handler(e.getRequestParam(e.getNodeParam(o),o));break}}}}},he.prototype.menubarListener=function(e,t){var o=this,a=o.getNodeDom().nowDiv();switch(e){case Q:o.menubarMethod().openAllNode();break;case Y:o.menubarMethod().closeAllNode();break;case Z:o.menubarMethod().refreshTree();break;case ee:o.menubarMethod().checkAll();break;case te:o.menubarMethod().unCheckAll();break;case oe:o.menubarMethod().invertAll();break;case ae:o.menubarMethod().remove();break;case ie:o.menubarMethod().searchNode();break;default:o.menubarMethod().extMethod(e,a,t)}},he.prototype.searchNode=function(e){var o=this,a=!1,i=[];if(o.obj.find("cite[data-leaf]").each((function(){var o=t(this);if(o.html().indexOf(e)>-1){if("leaf"==o.attr("data-leaf")){var a="";o.parents("li").each((function(){a="-"+t(this).find("cite[data-leaf]").html()+a})),a=a.substring(1,a.length),o.attr("title",a)}var n=0;o.parents("li").each((function(){if(t(this).find("cite[data-leaf]").html().indexOf(e)>-1&&n++,n>=2)return!0})),n<2&&i.push(o.closest("li").prop("outerHTML"))}})),i.length>0){a=!0,o.obj.html("");for(var n=0;n<i.length;n++)o.obj.append(i[n])}return a},he.prototype.getToolbarDom=function(){var e=this,t=e.toolbarShow,o=e.toolbarExt;e.toolbarWay;if(t.length>0)for(var a=0;a<t.length;a++){var i=t[a];"pulldown"==i&&(e.toolbarMenu[J]=e.setToolbarDom().setToolbarOption(J,e.toolbarStyle.title,e.usefontStyle.toolbar.pulldown,"展开")),"pullup"==i&&(e.toolbarMenu[G]=e.setToolbarDom().setToolbarOption(G,e.toolbarStyle.title,e.usefontStyle.toolbar.pullup,"收缩")),"add"==i&&(e.toolbarMenu[z]=e.setToolbarDom().setToolbarOption(z,e.toolbarStyle.title,e.usefontStyle.toolbar.add,"新增")),"edit"==i&&(e.toolbarMenu[X]=e.setToolbarDom().setToolbarOption(X,e.toolbarStyle.title,e.usefontStyle.toolbar.edit,"编辑")),"delete"==i&&(e.toolbarMenu[K]=e.setToolbarDom().setToolbarOption(K,e.toolbarStyle.title,e.usefontStyle.toolbar.del,"删除"))}if(o.length>0)for(a=0;a<o.length;a++){var n=o[a];e.toolbarMenu[n.toolbarId]=e.setToolbarDom().setToolbarOption(n.toolbarId,n.title,e.usefontStyle.toolbarExt+" "+n.icon,"")}},he.prototype.setToolbarDom=function(){var e=this,o=e.toolbarWay;return{setToolbarOption:function(e,t,a,i){return"contextmenu"==o?"<dd><a dtree-tool='"+e+"'><i class='"+a+"'></i>&nbsp;"+i+t+"</a></dd>":"fixed"==o||"follow"==o?"<a dtree-tool='"+e+"' title='"+i+t+"'><i class='"+a+"'></i></a>":void 0},setMenuToolbarOption:function(t,a,i,n){var r=e.obj[0].id;return"contextmenu"==o?"<dd><a dtree-id='"+r+"' d-menu='"+t+"'><i class='"+i+"'></i>&nbsp;"+n+a+"</a></dd>":"fixed"==o||"follow"==o?"<a dtree-id='"+r+"' d-menu='"+t+"' title='"+n+a+"'><i class='"+i+"'></i></a>":void 0},setToolbarPlace:function(a){if("contextmenu"==o){if(a)for(var i in e.obj.prevAll("div#dtree_toolbar_"+e.obj[0].id).find("div.layui-nav-item>dl.layui-nav-child").html(""),a)e.obj.prevAll("div#dtree_toolbar_"+e.obj[0].id).find("div.layui-nav-item>dl.layui-nav-child").append(a[i])}else"fixed"!=o&&"follow"!=o||e.obj.find("cite[data-leaf][dtree-disabled='false']").each((function(){var o=t(this);e.dynamicToolbarDom(o)}))}}},he.prototype.dynamicToolbarDom=function(e){var t=this,o=t.toolbarWay;if(0==e.next("em."+d).length){var a=e.parent("div"),i=t.getRequestParam(t.getTempNodeParam(a)),n=t.toolbarFun.loadToolbarBefore(ne.cloneObj(t.toolbarMenu),i,a),r=["<em class='dtree-toolbar-fixed "+("follow"==o?y:"")+"'>"];if(n)for(var s in n)r.push(n[s]);r.push("</em>"),e.after(r.join(""))}},he.prototype.toolbarHide=function(){var e=this;e.toolbar&&"contextmenu"==e.toolbarWay&&e.obj.prevAll("div#dtree_toolbar_"+e.obj[0].id).find(".layui-nav-child").removeClass("layui-anim-fadein layui-show")},he.prototype.toolbarMethod=function(){var e=this;return{pulldown:function(o){if(o)for(var a=o,i=0;i<a.length;i++){var n=t(a[i]),r=n.prev("div"),s=e.getNodeDom(r).fnode(),l=e.getNodeDom(r).snode(),d=e.getNodeDom(r).cite(),c=s.attr("data-spread");if("leaf"!=d.attr("data-leaf")){"open"==c||("load"==e.type?e.cache?n.html()?n.addClass(m):e.getChild(r):(n.html(""),e.getChild(r)):n.addClass(m),e.operateIcon(s,l).open());var h=n.children("li").children("ul");e.toolbarMethod().pulldown(h)}}},pullup:function(o){o.find("."+i).each((function(){var o=t(this),a=o.prev("div"),i=e.getNodeDom(a).fnode(),n=e.getNodeDom(a).snode(),r=e.getNodeDom(a).cite();i.attr("data-spread"),r.attr("data-leaf");o.removeClass(m),e.operateIcon(i,n).close()}))}}},he.prototype.toolbarListener=function(e,i){var n=this,r=i.children("cite[data-leaf]"),s=i.next("ul"),l=i.parent("li[data-index]"),d=l.parent("ul").prev("div"),c=r.html();switch(e){case J:n.toolbarMethod().pulldown(s);break;case G:n.toolbarMethod().pullup(l);break;case z:var h=n.loadToolBar(c,z);o.open({title:"新增"+n.toolbarStyle.title,type:1,area:n.toolbarStyle.area,content:h,success:function(e,r){a.render(),a.on("submit(dtree_addNode_form)",(function(e){e=e.field;var a=i.attr("data-id"),d=i.attr("data-id")+"_node_"+s[0].childNodes.length,c=parseInt(l.attr("data-index"))+1,h=[];if(n.checkArrLen>0)for(var u=0;u<n.checkArrLen;u++)h.push({type:u,checked:"0"});s.append(n.getLiItemDom(d,a,e.addNodeName,e.addNodeName,!0,"","",h,c,!1,!1,!1,"","","item")),s.find("li[data-id='"+d+"']").hide();var f=s.find("div[data-id='"+d+"']");node=n.getNodeParam(f);var p=n.getRequestParam(node);return p=t.extend(p,e),n.temp=[d,s,i,c],n.toolbarFun.addTreeNode(p,i),o.close(r),!1}))}});break;case X:h=n.loadToolBar(c,X);o.open({title:"编辑"+n.toolbarStyle.title,type:1,area:n.toolbarStyle.area,content:h,success:function(e,s){n.toolbarFun.editTreeLoad(n.getRequestParam(n.getNodeParam(i))),a.render(),a.on("submit(dtree_editNode_form)",(function(e){e=e.field;r.html(e.editNodeName),node=n.getNodeParam(i);var a=n.getRequestParam(node);a=t.extend(a,e),n.temp=[r,i,c,d],n.toolbarFun.editTreeNode(a,i),o.close(s)}))}});break;case K:o.confirm("确定要删除该"+n.toolbarStyle.title+"？",{icon:3,title:"删除"+n.toolbarStyle.title},(function(e){n.getNodeParam(i);n.temp=[l,d],n.toolbarFun.delTreeNode(n.getRequestParam(n.getNodeParam(i)),i),o.close(e)}));break;default:if(n.toolbarExt.length>0)for(var u=0;u<n.toolbarExt.length;u++){var f=n.toolbarExt[u];if(e==f.toolbarId){f.handler(n.getRequestParam(n.getNodeParam(i)),i);break}}}},he.prototype.loadToolBar=function(e,o){var a=this,i=(a.toolbarShow,a.toolbarBtn),n="";switch(o){case z:var r=[{label:"当前选中",name:"nodeTitle",type:"text",value:e,defElem:"nowChoose",readonly:!0},{label:"新增"+a.toolbarStyle.title,name:"addNodeName",type:"text",value:"",defElem:"nowChange",verify:"required"},{type:"submit",value:"确认添加",defElem:"btn",filter:"dtree_addNode_form"}],s=['<div class="'+l+'"><form class="layui-form layui-form-pane" lay-filter="dtree_addNode_form">'];if(null!=i&&i.length>0&&null!=i[0]&&null!=i[0]&&i[0].length>0)for(var d=i[0],c=0;c<d.length;c++){"nowChoose"==(m=d[c].defElem)?t.extend(r[0],d[c]):"nowChange"==m?t.extend(r[1],d[c]):"btn"==m?t.extend(r[2],d[c]):r.push(d[c])}for(var h=0;h<r.length;h++){switch((v=r[h].type)||(v="text"),v){case"text":s.push(a.loadToolBarDetail(r[h]).text());break;case"textarea":s.push(a.loadToolBarDetail(r[h]).textarea());break;case"select":s.push(a.loadToolBarDetail(r[h]).select());break;case"hidden":s.push(a.loadToolBarDetail(r[h]).hidden())}}var u=['<div class="layui-form-item">','<div class="layui-input-block" style="margin-left:0px;text-align:center;">'];for(h=0;h<r.length;h++){switch((v=r[h].type)||(v="text"),v){case"submit":u.push(a.loadToolBarDetail(r[h]).submit());break;case"button":u.push(a.loadToolBarDetail(r[h]).button());break;case"reset":u.push(a.loadToolBarDetail(r[h]).reset())}}u.push("</div></div>"),s.push(u.join("")),s.push("</form></div>"),n=s.join("");break;case X:var f=[{label:"当前选中",name:"nodeTitle",type:"text",value:e,defElem:"nowChoose",readonly:!0},{label:"编辑"+a.toolbarStyle.title,name:"editNodeName",type:"text",value:"",defElem:"nowChange",verify:"required"},{type:"submit",value:"确认编辑",defElem:"btn",filter:"dtree_editNode_form"}],p=['<div class="'+l+'"><form class="layui-form layui-form-pane" lay-filter="dtree_editNode_form">'];if(null!=i&&i.length>0&&null!=i[1]&&null!=i[1]&&i[1].length>0){var b=i[1];for(c=0;c<b.length;c++){var m;"nowChoose"==(m=b[c].defElem)?t.extend(f[0],b[c]):"nowChange"==m?t.extend(f[1],b[c]):"btn"==m?t.extend(f[2],b[c]):f.push(b[c])}}for(h=0;h<f.length;h++){switch((v=f[h].type)||(v="text"),v){case"text":p.push(a.loadToolBarDetail(f[h]).text());break;case"textarea":p.push(a.loadToolBarDetail(f[h]).textarea());break;case"select":p.push(a.loadToolBarDetail(f[h]).select());break;case"hidden":p.push(a.loadToolBarDetail(f[h]).hidden())}}var y=['<div class="layui-form-item">','<div class="layui-input-block" style="margin-left:0px;text-align:center;">'];for(h=0;h<f.length;h++){var v;switch((v=f[h].type)||(v="text"),v){case"submit":y.push(a.loadToolBarDetail(f[h]).submit());break;case"button":y.push(a.loadToolBarDetail(f[h]).button());break;case"reset":y.push(a.loadToolBarDetail(f[h]).reset())}}y.push("</div></div>"),p.push(y.join("")),p.push("</form></div>"),n=p.join("")}return n},he.prototype.loadToolBarDetail=function(e){var t="boolean"==typeof e.readonly&&e.readonly,o="boolean"==typeof e.disabled&&e.disabled,a=e.id?e.id:"",i=e.name?e.name:"",n=e.value?e.value:"",r=e.verify?e.verify:"",s=e.placeholder?e.placeholder:n;return{text:function(){return['<div class="layui-form-item">','<label class="layui-form-label" title="'+e.label+'">'+e.label+"：</label>",'<div class="layui-input-block f-input-par">','<input type="text" class="layui-input f-input" value="'+n+'" placeholder="'+s+'" lay-verify="'+r+'" ',""!=a?'id="'+a+'" ':"",""!=i?'name="'+i+'" ':"",t?"readonly ":"",o?"disabled ":"","/>","</div>","</div>"].join("")},textarea:function(){return['<div class="layui-form-item layui-form-text">','<label class="layui-form-label" title="'+e.label+'">'+e.label+"：</label>",'<div class="layui-input-block f-input-par">','<textarea class="layui-textarea f-input" value="'+n+'" placeholder="'+s+'" lay-verify="'+r+'" ',""!=a?'id="'+a+'" ':"",""!=i?'name="'+i+'" ':"",t?"readonly ":"",o?"disabled ":"",">"+n+"</textarea>","</div>","</div>"].join("")},hidden:function(){return['<input type="hidden" class="layui-input f-input" value="'+n+'" lay-verify="'+r+'" ',""!=a?'id="'+a+'" ':"",""!=i?'name="'+i+'" ':"",t?"readonly ":"",o?"disabled ":"","/>"].join("")},select:function(){var s="object"===_typeof(e.optionsData)?e.optionsData:e.optionsData(),l="";for(var d in s)n==s[d]?l+="<option value='"+d+"' selected>"+s[d]+"</option>":l+="<option value='"+d+"'>"+s[d]+"</option>";return['<div class="layui-form-item">','<label class="layui-form-label" title="'+e.label+'">'+e.label+"：</label>",'<div class="layui-input-block f-input-par">','<select lay-verify="'+r+'" ',""!=a?'id="'+a+'" ':"",""!=i?'name="'+i+'" ':"",t?"readonly ":"",o?"disabled ":"",">",l,"</select>","</div>","</div>"].join("")},submit:function(){return['<button type="button" class="layui-btn layui-btn-normal btn-w100" lay-submit lay-filter="'+e.filter+'" ',""!=a?'id="'+a+'" ':"",""!=i?'name="'+i+'" ':"",">"+n+"</button>"].join("")},button:function(){return['<button type="button" class="layui-btn layui-btn-normal btn-w100" ',""!=a?'id="'+a+'" ':"",""!=i?'name="'+i+'" ':""," >"+n+"</button>"].join("")},reset:function(){return['<button type="reset" class="layui-btn layui-btn-primary btn-w100" ',""!=a?'id="'+a+'" ':"",""!=i?'name="'+i+'" ':"",">"+n+"</button>"].join("")}}},he.prototype.changeTreeNodeAdd=function(e){var t=this,a=t.temp,i=a[0],n=a[1],r=a[2],s=a[3],l=!1;if(e){var d=t.obj.find("[data-id='"+i+"']");if("object"===(void 0===e?"undefined":_typeof(e))){d.remove();var c=t.parseData(e);if(!c.treeId())return o.msg("添加失败,节点ID为undefined！",{icon:5}),n.find("li[data-id='"+i+"']").remove(),t.setNodeParam(r),void(t.temp=[]);n.append(t.getLiItemDom(c.treeId(),c.parentId(),c.title(),c.fmtTitle(),c.last(0),c.ficonClass(),c.iconClass(),c.checkArr(),s,c.spread(),c.disabled(),c.hide(),c.basicData(),c.recordData(),"item")),d=n.find("div[data-id='"+c.treeId()+"']"),t.setNodeParam(d)}else"refresh"==e?l=!0:"string"!=typeof e&&"number"!=typeof e&&1!=e||(d.attr("data-id",e),n.find("li[data-id='"+e+"']").show(),t.setNodeParam(d));var h=r.find("i[data-spread]");"last"==h.eq(0).attr("data-spread")?t.operateIcon(h.eq(0),h.eq(1)).openWithLeaf():t.operateIcon(h.eq(0),h.eq(1)).open(),n.addClass(m),t.accordionUL(n),l?t.getChild(r):(t.showLine(n.find("li")),t.toolbar&&"contextmenu"!=t.toolbarWay&&t.dynamicToolbarDom(d.find("cite[data-leaf]")))}else n.find("li[data-id='"+i+"']").remove(),t.setNodeParam(r);t.temp=[]},he.prototype.changeTreeNodeDone=function(e){a.val("dtree_editNode_form",e),a.render()},he.prototype.changeTreeNodeEdit=function(e){var t=this,a=t.temp,i=a[0],n=a[1],r=a[2];a[3];if(e){if("object"===(void 0===e?"undefined":_typeof(e))){var s=t.parseData(data);if(s.treeId()){var l=t.replaceDom(n,s.treeId(),s.last(0),s.spread(),s.disabled(),s.hide());l.node(s.iconClass()),l.checkbox(s.checkArr()),l.text(s.title()),l.ul(),l.basicData(s.basicData()),l.recordData(s.recordData()),t.setNodeParam(n)}else o.msg("编辑失败,节点ID为undefined！",{icon:5}),t.setNodeParam(n)}}else i.html(r),t.getNodeParam(n);t.temp=[]},he.prototype.changeTreeNodeDel=function(e){var t=this,o=t.temp,a=o[0],i=a.parent("ul"),n=o[1];if(e){if(a.remove(),t.showLine(i.find("li")),0==i.children("li").length){var r=n.find("i[data-spread]");t.operateIcon(r.eq(0),r.eq(1)).closeWithLeaf()}t.initNodeParam()}t.temp=[]},he.prototype.loadIframe=function(e,a){var i=this,n=i.getNodeDom(e).cite();if(!i.useIframe)return!1;var r=i.iframeElem,s=i.iframeUrl,l="leaf"!=i.iframeLoad||"leaf"==n.attr("data-leaf");if(l){if(!(t(r).length>0))return o.msg("iframe绑定异常，请确认页面中是否有iframe页对应的容器",{icon:5}),!1;if(!s)return o.msg("数据请求异常，iframeUrl参数未指定",{icon:5}),!1;var d=ce(a);s.indexOf("?")>-1&&(d="&"+d.substring(1,d.length));var c=s+d;t(r).attr("src",c)}return l},he.prototype.getIframeRequestParam=function(e){var t=this,o=t.iframeRequest,a=t.iframeDefaultRequest,i=e||t.node,n={};for(var r in o)n[r]=o[r];for(var r in a){var s=a[r],l=i[r];("boolean"==typeof l||l)&&(n[s]=l)}var d=/[\u4E00-\u9FA5\uF900-\uFA2D]/;for(var r in n)if(d.test(n[r])){var c=n[r];n[r]=encodeURI(encodeURI(c))}return n},he.prototype.getNodeDom=function(e){var t=this,o="object"===(void 0===e?"undefined":_typeof(e))?e:0==t.obj.find("div[dtree-click='"+V+"'][data-id='"+e+"']").length?null:t.obj.find("div[dtree-click='"+V+"'][data-id='"+e+"']");return{div:function(){return o},fnode:function(){return null==o?null:o.find("i[data-spread]").eq(0)},snode:function(){return null==o?null:o.find("i[data-spread]").eq(1)},checkbox:function(){return null==o?null:o.find("i[data-par]")},cite:function(){return null==o?null:o.find("cite[data-leaf]")},nextUl:function(){return null==o?null:o.next("ul")},parentLi:function(){return null==o?null:o.parent("li")},parentUl:function(){return null==o?null:o.parent("li").parent("ul")},parentDiv:function(){return null==o?null:o.parent("li").parent("ul").prev("div")},nowDiv:function(){return 0==t.obj.find("div[dtree-click='"+V+"'][data-id]").parent().find("."+b).length?null:t.obj.find("div[dtree-click='"+V+"'][data-id]").parent().find("."+b)},nowOrRootDiv:function(){return 0==t.obj.find("div[dtree-click='"+V+"'][data-id]").parent().find("."+b).length?t.obj.children("li").eq(0).children("div").eq(0):t.obj.find("div[dtree-click='"+V+"'][data-id]").parent().find("."+b)},nowOrRootUl:function(){return 0==t.obj.find("div[dtree-click='"+V+"'][data-id]").parent().find("."+b).length?t.obj:t.obj.find("div[dtree-click='"+V+"'][data-id]").parent().find("."+b).next("ul")}}},he.prototype.getNowNodeUl=function(){return this.getNodeDom().nowOrRootUl()},he.prototype.getNowNode=function(){return this.getNodeDom().nowOrRootDiv()},he.prototype.getNowNodeOrNull=function(){return this.getNodeDom().nowDiv()},he.prototype.getNode=function(e){return this.getNodeDom(e).div()},he.prototype.setNodeParam=function(e){var o=this;o.node.nodeId=e.attr("data-id"),o.node.parentId=o.getNodeDom(e).parentLi().attr("data-pid"),o.node.context="function"==typeof o.formatter.title?o.getNodeDom(e).cite().attr("data-title"):o.getNodeDom(e).cite().text(),o.node.leaf="leaf"==o.getNodeDom(e).cite().attr("data-leaf"),o.node.level=o.getNodeDom(e).parentLi().attr("data-index"),o.node.spread="open"==o.getNodeDom(e).fnode().attr("data-spread");var a=e.attr("data-basic");a&&(a=JSON.parse(ne.unescape(a))),o.node.basicData=a;var i=e.attr("data-record");if(i&&(i=JSON.parse(ne.unescape(i))),o.node.recordData=i,o.getNodeDom(e).checkbox()){var n="",r="",s="";o.getNodeDom(e).checkbox().each((function(){n+=t(this).attr("data-type")+",",r+=t(this).attr("data-checked")+",",s+=t(this).attr("data-initchecked")+","})),n=n.substring(0,n.length-1),r=r.substring(0,r.length-1),s=s.substring(0,s.length-1),o.node.dataType=n,o.node.checked=r,o.node.initchecked=s}},he.prototype.getNodeParam=function(e){var t=this;return e?t.setNodeParam(e):0==t.obj.find("div[data-id]").parent().find("."+b).length&&t.initNodeParam(),this.node},he.prototype.getTempNodeParam=function(e){var o=this,a={};a.nodeId=e.attr("data-id"),a.parentId=o.getNodeDom(e).parentLi().attr("data-pid"),a.context="function"==typeof o.formatter.title?o.getNodeDom(e).cite().attr("data-title"):o.getNodeDom(e).cite().text(),a.leaf="leaf"==o.getNodeDom(e).cite().attr("data-leaf"),a.level=o.getNodeDom(e).parentLi().attr("data-index"),a.spread="open"==o.getNodeDom(e).fnode().attr("data-spread");var i=e.attr("data-basic");i&&(i=JSON.parse(ne.unescape(i))),a.basicData=i;var n=e.attr("data-record");if(n&&(n=JSON.parse(ne.unescape(n))),a.recordData=n,o.getNodeDom(e).checkbox()){var r="",s="",l="";o.getNodeDom(e).checkbox().each((function(){r+=t(this).attr("data-type")+",",s+=t(this).attr("data-checked")+",",l+=t(this).attr("data-initchecked")+","})),r=r.substring(0,r.length-1),s=s.substring(0,s.length-1),l=l.substring(0,l.length-1),a.dataType=r,a.checked=s,a.initchecked=l}return a},he.prototype.initNodeParam=function(){var e=this;e.node.nodeId="",e.node.parentId="",e.node.context="",e.node.leaf="",e.node.level="",e.node.spread="",e.node.dataType="",e.node.checked="",e.node.initchecked="",e.node.basicData="",e.node.recordData="",e.select&&e.selectResetVal()},he.prototype.getRequestParam=function(e){var t=this,o=t.request,a=t.defaultRequest,i=e||t.node,n={};for(var r in o)n[r]=o[r];for(var r in a){var s=a[r],l=i[r];("boolean"==typeof l||l)&&(n[s]=l)}return n},he.prototype.getFilterRequestParam=function(e){var t=this.filterRequest;return ne.cloneObj(e,t)},he.prototype.getNowParam=function(){return this.getRequestParam(this.getNodeParam())},he.prototype.getParam=function(e){var t=this,o="object"===(void 0===e?"undefined":_typeof(e))?e:0==t.obj.find("div[dtree-click='"+V+"'][data-id='"+e+"']").length?null:t.obj.find("div[dtree-click='"+V+"'][data-id='"+e+"']");return null!=o?t.callbackData().node(t.getTempNodeParam(o)):{}},he.prototype.getParentParam=function(e){var t=this,o="object"===(void 0===e?"undefined":_typeof(e))?e:0==t.obj.find("div[dtree-click='"+V+"'][data-id='"+e+"']").length?null:t.obj.find("div[dtree-click='"+V+"'][data-id='"+e+"']");return null!=o?t.callbackData().parentNode(o):{}},he.prototype.getAllParentParam=function(e){var t=this,o="object"===(void 0===e?"undefined":_typeof(e))?e:0==t.obj.find("div[dtree-click='"+V+"'][data-id='"+e+"']").length?null:t.obj.find("div[dtree-click='"+V+"'][data-id='"+e+"']"),a=[];if(null!=o)for(var i=t.getTempNodeParam(o).level,n=1;n<i;n++)a.unshift(t.callbackData().parentNode(o)),o=t.getNodeDom(o).parentDiv();return a},he.prototype.getChildParam=function(e){var t=this,o="object"===(void 0===e?"undefined":_typeof(e))?e:0==t.obj.find("div[dtree-click='"+V+"'][data-id='"+e+"']").length?null:t.obj.find("div[dtree-click='"+V+"'][data-id='"+e+"']");return null!=o?t.callbackData().childNode(o):[]},he.prototype.callbackData=function(){var e=this;return{dom:function(e){return e},node:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(t){return e.getRequestParam(t)})),childNode:function(o){var a=o.next("ul").find("li.dtree-nav-item div."+r),i=[];return a&&a.length>0&&a.each((function(){var o=t(this);i.push(e.getRequestParam(e.getTempNodeParam(o)))})),i},parentNode:function(t){var o=e.getNodeDom(t).parentLi().attr("data-pid"),a=e.obj.find("div[data-id='"+o+"']");return a.length>0?e.getRequestParam(e.getTempNodeParam(a)):{}}}},he.prototype.bindBrowserEvent=function(){var e=this,o=e.obj[0].id;e.obj.on("click","i[data-spread]",(function(o){o.stopPropagation();var a=t(this),i=a.parent("div"),n=e.getNodeParam(i);e.toolbarHide(),e.navThis(i),e.clickSpread(i),layui.event.call(this,D,"changeTree("+t(e.obj)[0].id+")",{dom:e.callbackData().dom(a),param:e.callbackData().node(n),show:"open"==e.callbackData().dom(a).attr("data-spread")})})),e.obj.on("click","div[dtree-click='"+V+"'][dtree-disabled='false']",(function(a){a.stopPropagation();var i=t(this),n=(i.find("cite"),e.getNodeParam(i));if(e.toolbarHide(),e.navThis(i),e.select&&(e.selectVal(n.nodeId),t("div[dtree-id='"+o+"'][dtree-select='"+e.selectDiv+"']").click()),e.useIframe){var r=e.getFilterRequestParam(e.getIframeRequestParam(n));e.loadIframe(i,r)&&(e.iframeFun.iframeDone(r),layui.event.call(this,D,"iframeDone("+t(e.obj)[0].id+")",{iframeParam:r,dom:e.callbackData().dom(i)}))}else layui.event.call(this,D,"node("+t(e.obj)[0].id+")",{param:e.callbackData().node(n),childParams:e.callbackData().childNode(i),parentParam:e.callbackData().parentNode(i),dom:e.callbackData().dom(i)})})),e.obj.on("dblclick","div[dtree-click='"+V+"'][dtree-disabled='false']",(function(a){a.stopPropagation();var i=t(this),n=(i.find("cite"),e.getNodeParam(i));e.toolbarHide(),e.navThis(i),e.select&&(e.selectVal(n.nodeId),t("div[dtree-id='"+o+"'][dtree-select='"+e.selectDiv+"']").click()),layui.event.call(this,D,"nodedblclick("+t(e.obj)[0].id+")",{param:e.callbackData().node(n),childParams:e.callbackData().childNode(i),parentParam:e.callbackData().parentNode(i),dom:e.callbackData().dom(i)})})),e.checkbar&&e.obj.on("click","i[dtree-click='"+$+"'][dtree-disabled='false']",(function(o){e.toolbarHide();var a=t(this),i=a.closest("div[dtree-click='"+V+"']"),n=e.getNodeParam(i),r=e.checkbarFun.chooseBefore(a,e.getRequestParam(n));e.temp=[a],r&&e.changeCheck(),o.stopPropagation()})),e.menubar&&(e.obj.prevAll("div#dtree_menubar_"+e.obj[0].id).on("click","button[d-menu]",(function(o){o.stopPropagation(),e.toolbarHide(),e.menubarListener(t(this).attr("d-menu"),"group")})),e.obj.prevAll("div#dtree_toolbar_"+e.obj[0].id).on("click","a[d-menu]",(function(o){o.stopPropagation(),e.toolbarHide(),e.menubarListener(t(this).attr("d-menu"),"toolbar")})),e.obj.closest("body").find("*[dtree-id='"+e.obj[0].id+"'][dtree-menu]").on("click",(function(o){o.stopPropagation(),e.toolbarHide(),e.menubarListener(t(this).attr("dtree-menu"),"freedom")}))),e.toolbar&&("contextmenu"==e.toolbarWay?(e.obj.on("contextmenu","div[dtree-click='"+V+"'][d-contextmenu='true'][dtree-disabled='false']",(function(o){var a=t(this),i=e.getNodeParam(a);e.toolbarHide(),e.setToolbarDom().setToolbarPlace(e.toolbarFun.loadToolbarBefore(ne.cloneObj(e.toolbarMenu),e.getRequestParam(i),a));var n=(o=o||window.event).pageX-a.offset().left+45,r=a.offset().top-e.obj.closest(e.scroll).offset().top+15;e.navThis(a);var s=e.obj.prevAll("div#dtree_toolbar_"+e.obj[0].id);return s.find(".layui-nav-child").addClass("layui-anim-fadein layui-show"),s.css({left:n+"px",top:r+"px"}),o.stopPropagation(),!1})),e.obj.closest(e.scroll).scroll((function(){e.toolbarHide()})),e.obj.prevAll("div#dtree_toolbar_"+e.obj[0].id).on("click","a[dtree-tool]",(function(o){o.stopPropagation();var a=e.getNodeDom().nowOrRootDiv();e.getNodeParam(a);e.toolbarHide();var i=t(this).attr("dtree-tool");e.toolbarListener(i,a)}))):"fixed"==e.toolbarWay?e.obj.on("click","a[dtree-tool]",(function(o){o.stopPropagation();var a=t(this),i=a.parent("em."+d).prev("cite").parent("div"),n=(e.getNodeParam(i),a.attr("dtree-tool"));e.toolbarHide(),e.navThis(i),e.toolbarListener(n,i)})):"follow"==e.toolbarWay&&(e.obj.on("mouseover mouseout","div[dtree-click='"+V+"'][dtree-disabled='false']",(function(e){var o=t(this).children("em."+d);"mouseover"==e.type?(o.removeClass(y),e.stopPropagation()):"mouseout"==e.type&&(o.addClass(y),e.stopPropagation())})),e.obj.on("click","a[dtree-tool]",(function(o){o.stopPropagation();var a=t(this),i=a.parent("em."+d).prev("cite").parent("div"),n=(e.getNodeParam(i),a.attr("dtree-tool"));e.toolbarHide(),e.navThis(i),e.toolbarListener(n,i)})))),e.select&&t("div[dtree-id='"+o+"'][dtree-select='"+e.selectDiv+"']").on("click",(function(a){a.stopPropagation(),t(this).toggleClass("layui-form-selected"),t("div[dtree-id='"+o+"'][dtree-card='"+e.selectCardDiv+"']").toggleClass("dtree-select-show layui-anim layui-anim-upbit"),layui.event.call(this,D,"changeSelect("+t(e.obj)[0].id+")",{show:t(this).hasClass("layui-form-selected"),param:e.selectVal()})}))},k.on("click",(function(e){t("div.dtree-toolbar").find(".layui-show").removeClass("layui-anim-fadein layui-show")})),he.prototype.unbindBrowserEvent=function(){var e=this;e.obj.unbind(),e.menubar&&(e.obj.prevAll("div#dtree_menubar_"+e.obj[0].id).unbind(),e.obj.closest("body").find("*[dtree-id='"+e.obj[0].id+"'][dtree-menu]").length>0&&e.obj.closest("body").find("*[dtree-id='"+e.obj[0].id+"'][dtree-menu]").unbind()),e.toolbar&&"contextmenu"==e.toolbarWay&&(e.obj.prevAll("div#dtree_toolbar_"+e.obj[0].id).unbind(),e.obj.closest(e.scroll).length>0&&e.obj.closest(e.scroll).unbind()),e.select&&(t("div[dtree-id='"+e.obj[0].id+"'][dtree-select='"+e.selectDiv+"']").removeClass("layui-form-selected"),t("div[dtree-id='"+e.obj[0].id+"'][dtree-card='"+e.selectCardDiv+"']").removeClass("dtree-select-show layui-anim layui-anim-upbit"),t("div[dtree-id='"+e.obj[0].id+"'][dtree-select='"+e.selectDiv+"']").unbind())},e("dtree",{set:function(e){void 0!==e&&t.extend(N,e)},render:function(e){var t=null,a=ne.getElemId(e);return""==a?o.msg("页面中未找到绑定id",{icon:5}):("object"===(void 0===(t=T[a])?"undefined":_typeof(t))&&t.unbindBrowserEvent(),t=new he(e),T[a]=t,t.initTreePlus(),t.openTreePlus(),t.init(),t.bindBrowserEvent()),t},renderSelect:function(e){var t=null,a=ne.getElemId(e);return""==a?o.msg("页面中未找到绑定id",{icon:5}):("object"===(void 0===(t=T[a])?"undefined":_typeof(t))&&t.unbindBrowserEvent(),(t=new he(e)).selectSetting(),T[a]=t,t.initTreePlus(),t.openTreePlus(),t.init(),t.bindBrowserEvent()),t},reload:function(e,t){"string"==typeof e&&(e=T[e]),void 0!==e?(e.reloadSetting(t),e.initTreePlus(),e.openTreePlus(),e.initNodeParam(),e.init(),e.unbindBrowserEvent(),e.bindBrowserEvent()):o.msg("方法获取失败，请检查ID或对象传递是否正确",{icon:2})},on:function(e,t){return e.indexOf("'")>0&&(e=e.replace(/'/g,"")),e.indexOf('"')>0&&(e=e.replace(/"/g,"")),layui.onevent.call(this,D,e,t)},click:function(e,a){"string"==typeof e&&(e=T[e]),void 0!==e?t("div[dtree-click='"+V+"'][dtree-id='"+e.obj[0].id+"'][data-id='"+a+"']").click():o.msg("方法获取失败，请检查ID或对象传递是否正确",{icon:2})},getNowParam:function(e){if("string"==typeof e&&(e=T[e]),void 0!==e)return e.getNowParam();o.msg("方法获取失败，请检查ID或对象传递是否正确",{icon:2})},getParam:function(e,t){if("string"==typeof e&&(e=T[e]),void 0!==e)return e.getParam(t);o.msg("方法获取失败，请检查ID或对象传递是否正确",{icon:2})},getParentParam:function(e,t){if("string"==typeof e&&(e=T[e]),void 0!==e)return e.getParentParam(t);o.msg("方法获取失败，请检查ID或对象传递是否正确",{icon:2})},getAllParentParam:function(e,t){if("string"==typeof e&&(e=T[e]),void 0!==e)return e.getAllParentParam(t);o.msg("方法获取失败，请检查ID或对象传递是否正确",{icon:2})},getChildParam:function(e,t){if("string"==typeof e&&(e=T[e]),void 0!==e)return e.getChildParam(t);o.msg("方法获取失败，请检查ID或对象传递是否正确",{icon:2})},getCheckbarNodesParam:function(e){return"string"==typeof e&&(e=T[e]),void 0===e?(o.msg("方法获取失败，请检查ID或对象传递是否正确",{icon:2}),{}):e.getCheckbarNodesParam()},dataInit:function(e,t){if("string"==typeof e&&(e=T[e]),void 0!==e)return t?e.dataInit(t):void 0;o.msg("方法获取失败，请检查ID或对象传递是否正确",{icon:2})},chooseDataInit:function(e,t){if("string"==typeof e&&(e=T[e]),void 0!==e)return t?e.chooseDataInit(t):void 0;o.msg("方法获取失败，请检查ID或对象传递是否正确",{icon:2})},changeCheckbarNodes:function(e){if("string"==typeof e&&(e=T[e]),void 0!==e)return e.changeCheckbarNodes();o.msg("方法获取失败，请检查ID或对象传递是否正确",{icon:2})},initNoAllCheck:function(e){if("string"==typeof e&&(e=T[e]),void 0!==e)return e.initNoAllCheck();o.msg("方法获取失败，请检查ID或对象传递是否正确",{icon:2})},initAllCheck:function(e){if("string"==typeof e&&(e=T[e]),void 0!==e)return e.initAllCheck();o.msg("方法获取失败，请检查ID或对象传递是否正确",{icon:2})},selectVal:function(e,t){if("string"==typeof e&&(e=T[e]),void 0!==e)return e.selectVal(t);o.msg("方法获取失败，请检查ID或对象传递是否正确",{icon:2})},escape:function(e){return ne.escape(e)},unescape:function(e){return ne.unescape(e)},version:function(){return"v2.5.6"}})}));